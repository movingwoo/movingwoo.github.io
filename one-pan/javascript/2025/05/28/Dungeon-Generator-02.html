<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.24.0 by Michael Rose
  Copyright 2013-2020 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="ko" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>던전 생성기 02 - 뭐라도 하겠지</title>
<meta name="description" content="JAVASCRIPT 던전 생성기 프로그램 개발">



<meta property="og:type" content="article">
<meta property="og:locale" content="ko_KR">
<meta property="og:site_name" content="뭐라도 하겠지">
<meta property="og:title" content="던전 생성기 02">
<meta property="og:url" content="https://movingwoo.com/one-pan/javascript/2025/05/28/Dungeon-Generator-02.html">


  <meta property="og:description" content="JAVASCRIPT 던전 생성기 프로그램 개발">







  <meta property="article:published_time" content="2025-05-28T02:00:00+00:00">



  <meta property="article:modified_time" content="2025-05-28T02:00:00+00:00">




<link rel="canonical" href="https://movingwoo.com/one-pan/javascript/2025/05/28/Dungeon-Generator-02.html">




<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    
      "@type": "Person",
      "name": "뭐라도 하겠지",
      "url": "https://movingwoo.com/"
    
  }
</script>







<!-- end _includes/seo.html -->


<!-- Favicon -->
<link rel="icon" type="image/png" sizes="32x32" href="/assets/images/common/favicon_32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/assets/images/common/favicon_16x16.png">
<link rel="apple-touch-icon" sizes="180x180" href="/assets/images/common/favicon_180x180.png">
<link rel="manifest" href="/assets/site.webmanifest">


  <link href="/feed.xml" type="application/atom+xml" rel="alternate" title="뭐라도 하겠지 Feed">


<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css"></noscript>



    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<!-- end custom head snippets -->

  </head>

  <body class="layout--single">
    <nav class="skip-links">
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    

<script>
document.addEventListener('DOMContentLoaded', function() {
  const dropdownBtn = document.querySelector('.head-content-btn');
  const dropdownContent = document.querySelector('.game-dropdown-content');
  let isOpen = false;

  // 드롭다운 버튼 클릭 이벤트
  dropdownBtn.addEventListener('click', function(e) {
    e.stopPropagation();
    isOpen = !isOpen;
    if (isOpen) {
      const rect = dropdownBtn.getBoundingClientRect();
      dropdownContent.style.top = rect.bottom + 'px';
      dropdownContent.style.left = rect.left + 'px';
      dropdownContent.classList.add('show');
    } else {
      dropdownContent.classList.remove('show');
    }
  });

  // 외부 클릭 시 드롭다운 닫기
  document.addEventListener('click', function(e) {
    if (isOpen && !dropdownContent.contains(e.target) && !dropdownBtn.contains(e.target)) {
      isOpen = false;
      dropdownContent.classList.remove('show');
    }
  });
});
</script>

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
          <a class="site-logo" href="/"><img src="/assets/images/common/favicon_180x180.png" alt="뭐라도 하겠지"></a>
        
        <a class="site-title" href="/">
          뭐라도 하겠지
          
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
            <div class="game-dropdown">
              <button class="head-content-btn">
                play <i class="fas fa-caret-down"></i>
              </button>
              <div class="game-dropdown-content">
                <a href="/play/Flappy%20Bird.html" target="_blank">Flappy Bird</a>
                <a href="/play/Minesweeper.html" target="_blank">Minesweeper</a>
                <a href="/play/Random%20Printer.html" target="_blank">Random Printer</a>
                <a href="/play/Maze%20Generator.html" target="_blank">Maze Generator</a>
                <a href="/play/Dungeon%20Generator.html" target="_blank">Dungeon Generator</a>
              </div>
            </div>
          </li>
          <li class="masthead__menu-item">
            <button class="head-content-btn" onclick="window.location.href='/board?path='">
              explorer
            </button>
          </li>
        </ul>
        <div class="search-container">
          <input type="text" id="search-input" placeholder="제목 검색" class="search-input">
          <button class="search-button" type="button">
            <i class="fas fa-search"></i>
          </button>
        </div>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>

<!-- 
  <h1 class="title__logo"><a href="https://movingwoo.com/">뭐라도 하겠지</a></h1>
 -->



<script src="/assets/js/search.js"></script>


    <div class="initial-content">
      <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>던전 생성기 02 | 뭐라도 하겠지</title>
<meta name="generator" content="Jekyll v4.3.4" />
<meta property="og:title" content="던전 생성기 02" />
<meta name="author" content="movingwoo" />
<meta property="og:locale" content="ko_KR" />
<meta name="description" content="JAVASCRIPT 던전 생성기 프로그램 개발" />
<meta property="og:description" content="JAVASCRIPT 던전 생성기 프로그램 개발" />
<link rel="canonical" href="https://movingwoo.com/one-pan/javascript/2025/05/28/Dungeon-Generator-02.html" />
<meta property="og:url" content="https://movingwoo.com/one-pan/javascript/2025/05/28/Dungeon-Generator-02.html" />
<meta property="og:site_name" content="뭐라도 하겠지" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2025-05-28T02:00:00+00:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="던전 생성기 02" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"movingwoo"},"dateModified":"2025-05-28T02:00:00+00:00","datePublished":"2025-05-28T02:00:00+00:00","description":"JAVASCRIPT 던전 생성기 프로그램 개발","headline":"던전 생성기 02","mainEntityOfPage":{"@type":"WebPage","@id":"https://movingwoo.com/one-pan/javascript/2025/05/28/Dungeon-Generator-02.html"},"publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://movingwoo.com/assets/images/common/favicon_180x180.png"},"name":"movingwoo"},"url":"https://movingwoo.com/one-pan/javascript/2025/05/28/Dungeon-Generator-02.html"}</script>
<!-- End Jekyll SEO tag -->






<div class="home-layout">
  <div class="home-sidebar">
    







<aside class="sidebar__left">
  <div class="toc-wrapper">
    <nav class="toc">
      <header>
        <h4 class="nav__title">
          <span class="title-text">
            <i class="fas fa-sitemap"></i> Archive
          </span>
          <a href="/board?path=" class="search-link" title="탐색">
            <i class="fas fa-list-ul"></i>
          </a>
        </h4>
      </header>

      <ul class="toc__menu">
        
          
          
          
          
          
          
          <li class="toc__item depth-0" data-path="AI-playground/" data-total-posts="0">
            <div class="toc__menu-title">
              <span class="folder-toggle">
                <i class="fas fa-folder-open"></i>
              </span>
              <span class="folder-name">AI-playground</span>
              
              
            </div>
            
            
            
            <ul class="toc__menu submenu">
              
                
              
                
                  
                  
                  
                
              
                
                  
                  
                  
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
            </ul>
          </li>
        
          
          
          
          
          
          
          <li class="toc__item depth-1" data-path="AI-playground/Claude/" data-total-posts="2">
            <div class="toc__menu-title">
              <span class="folder-toggle">
                <i class="fas fa-folder-open"></i>
              </span>
              <span class="folder-name">Claude</span>
              
              
                <span class="post-count">2</span>
              
            </div>
            
            
              <ul class="toc__menu posts-list">
                
                  <li>
                    <a href="/ai-playground/claude/2025/05/01/Claude.html" class="toc__link">
                      <i class="fas fa-file-alt"></i> 즐거운 연휴, 어떻게 보내면 좋을까?
                    </a>
                  </li>
                
                  <li>
                    <a href="/ai-playground/claude/2025/04/30/Claude.html" class="toc__link">
                      <i class="fas fa-file-alt"></i> AI 시대의 개발자, 어떻게 준비해야 할까?
                    </a>
                  </li>
                
                
              </ul>
            
            
            <ul class="toc__menu submenu">
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
            </ul>
          </li>
        
          
          
          
          
          
          
          <li class="toc__item depth-1" data-path="AI-playground/GPT/" data-total-posts="3">
            <div class="toc__menu-title">
              <span class="folder-toggle">
                <i class="fas fa-folder-open"></i>
              </span>
              <span class="folder-name">GPT</span>
              
              
                <span class="post-count">3</span>
              
            </div>
            
            
              <ul class="toc__menu posts-list">
                
                  <li>
                    <a href="/ai-playground/gpt/2025/05/14/GPT.html" class="toc__link">
                      <i class="fas fa-file-alt"></i> 파이썬으로 CLI TODO 리스트 만들어보기
                    </a>
                  </li>
                
                  <li>
                    <a href="/ai-playground/gpt/2025/05/01/GPT.html" class="toc__link">
                      <i class="fas fa-file-alt"></i> 즐거운 연휴
                    </a>
                  </li>
                
                  <li>
                    <a href="/ai-playground/gpt/2025/04/30/GPT.html" class="toc__link">
                      <i class="fas fa-file-alt"></i> 프로그래머를 위한 생산성 툴 TOP 5 🧰
                    </a>
                  </li>
                
                
              </ul>
            
            
            <ul class="toc__menu submenu">
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
            </ul>
          </li>
        
          
          
          
          
          
          
          <li class="toc__item depth-0" data-path="one-pan/" data-total-posts="0">
            <div class="toc__menu-title">
              <span class="folder-toggle">
                <i class="fas fa-folder-open"></i>
              </span>
              <span class="folder-name">one-pan</span>
              
              
            </div>
            
            
            
            <ul class="toc__menu submenu">
              
                
              
                
              
                
              
                
              
                
                  
                  
                  
                
              
                
                  
                  
                  
                
              
                
                  
                  
                  
                
              
                
                  
                  
                  
                
              
                
                  
                  
                  
                
              
                
              
                
              
                
              
                
              
            </ul>
          </li>
        
          
          
          
          
          
          
          <li class="toc__item depth-1" data-path="one-pan/Java/" data-total-posts="1">
            <div class="toc__menu-title">
              <span class="folder-toggle">
                <i class="fas fa-folder-open"></i>
              </span>
              <span class="folder-name">Java</span>
              
              
                <span class="post-count">1</span>
              
            </div>
            
            
              <ul class="toc__menu posts-list">
                
                  <li>
                    <a href="/one-pan/java/2025/05/11/Bulls-and-Cows.html" class="toc__link">
                      <i class="fas fa-file-alt"></i> 숫자야구
                    </a>
                  </li>
                
                
              </ul>
            
            
            <ul class="toc__menu submenu">
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
            </ul>
          </li>
        
          
          
          
          
          
          
          <li class="toc__item depth-1" data-path="one-pan/JavaScript/" data-total-posts="8">
            <div class="toc__menu-title">
              <span class="folder-toggle">
                <i class="fas fa-folder-open"></i>
              </span>
              <span class="folder-name">JavaScript</span>
              
              
                <span class="post-count">8</span>
              
            </div>
            
            
              <ul class="toc__menu posts-list">
                
                  <li>
                    <a href="/one-pan/javascript/2025/05/28/Dungeon-Generator-02.html" class="toc__link">
                      <i class="fas fa-file-alt"></i> 던전 생성기 02
                    </a>
                  </li>
                
                  <li>
                    <a href="/one-pan/javascript/2025/05/27/Dungeon-Generator-01.html" class="toc__link">
                      <i class="fas fa-file-alt"></i> 던전 생성기 01
                    </a>
                  </li>
                
                  <li>
                    <a href="/one-pan/javascript/2025/05/23/Maze-Generator-03.html" class="toc__link">
                      <i class="fas fa-file-alt"></i> 미로 생성기 03
                    </a>
                  </li>
                
                
                  <li>
                    <a href="/board?path=one-pan%2FJavaScript%2F" class="toc__link more-posts">
                      <i class="fas fa-ellipsis-h"></i> 더보기
                    </a>
                  </li>
                
              </ul>
            
            
            <ul class="toc__menu submenu">
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
            </ul>
          </li>
        
          
          
          
          
          
          
          <li class="toc__item depth-1" data-path="one-pan/Python/" data-total-posts="3">
            <div class="toc__menu-title">
              <span class="folder-toggle">
                <i class="fas fa-folder-open"></i>
              </span>
              <span class="folder-name">Python</span>
              
              
                <span class="post-count">3</span>
              
            </div>
            
            
              <ul class="toc__menu posts-list">
                
                  <li>
                    <a href="/one-pan/python/2025/06/09/Hardware-Monitor.html" class="toc__link">
                      <i class="fas fa-file-alt"></i> 하드웨어 모니터
                    </a>
                  </li>
                
                  <li>
                    <a href="/one-pan/python/2025/06/04/WebP-Converter.html" class="toc__link">
                      <i class="fas fa-file-alt"></i> WebP 변환기
                    </a>
                  </li>
                
                  <li>
                    <a href="/one-pan/python/2025/05/13/Clicker.html" class="toc__link">
                      <i class="fas fa-file-alt"></i> 클리커
                    </a>
                  </li>
                
                
              </ul>
            
            
            <ul class="toc__menu submenu">
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
            </ul>
          </li>
        
          
          
          
          
          
          
          <li class="toc__item depth-1" data-path="one-pan/ShellScript/" data-total-posts="2">
            <div class="toc__menu-title">
              <span class="folder-toggle">
                <i class="fas fa-folder-open"></i>
              </span>
              <span class="folder-name">ShellScript</span>
              
              
                <span class="post-count">2</span>
              
            </div>
            
            
              <ul class="toc__menu posts-list">
                
                  <li>
                    <a href="/one-pan/shellscript/2025/05/12/File-Copier.html" class="toc__link">
                      <i class="fas fa-file-alt"></i> 파일 복사기
                    </a>
                  </li>
                
                  <li>
                    <a href="/one-pan/shellscript/2025/04/28/Server-Manage-Console.html" class="toc__link">
                      <i class="fas fa-file-alt"></i> 서버 관리 콘솔
                    </a>
                  </li>
                
                
              </ul>
            
            
            <ul class="toc__menu submenu">
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
            </ul>
          </li>
        
          
          
          
          
          
          
          <li class="toc__item depth-1" data-path="one-pan/Shortcuts/" data-total-posts="2">
            <div class="toc__menu-title">
              <span class="folder-toggle">
                <i class="fas fa-folder-open"></i>
              </span>
              <span class="folder-name">Shortcuts</span>
              
              
                <span class="post-count">2</span>
              
            </div>
            
            
              <ul class="toc__menu posts-list">
                
                  <li>
                    <a href="/one-pan/shortcuts/2025/06/11/Drawing-Lots.html" class="toc__link">
                      <i class="fas fa-file-alt"></i> 제비 뽑기
                    </a>
                  </li>
                
                  <li>
                    <a href="/one-pan/shortcuts/2025/06/02/Magic-Conch-Shell.html" class="toc__link">
                      <i class="fas fa-file-alt"></i> 마법의 소라고둥
                    </a>
                  </li>
                
                
              </ul>
            
            
            <ul class="toc__menu submenu">
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
            </ul>
          </li>
        
          
          
          
          
          
          
          <li class="toc__item depth-0" data-path="random-solve/" data-total-posts="0">
            <div class="toc__menu-title">
              <span class="folder-toggle">
                <i class="fas fa-folder-open"></i>
              </span>
              <span class="folder-name">random-solve</span>
              
              
            </div>
            
            
            
            <ul class="toc__menu submenu">
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
                  
                  
                  
                
              
                
                  
                  
                  
                
              
                
                  
                  
                  
                
              
            </ul>
          </li>
        
          
          
          
          
          
          
          <li class="toc__item depth-1" data-path="random-solve/C++/" data-total-posts="7">
            <div class="toc__menu-title">
              <span class="folder-toggle">
                <i class="fas fa-folder-open"></i>
              </span>
              <span class="folder-name">C++</span>
              
              
                <span class="post-count">7</span>
              
            </div>
            
            
              <ul class="toc__menu posts-list">
                
                  <li>
                    <a href="/random-solve/c++/2025/06/16/10722.html" class="toc__link">
                      <i class="fas fa-file-alt"></i> 10722번 Binary Mobile Tree
                    </a>
                  </li>
                
                  <li>
                    <a href="/random-solve/c++/2025/06/13/16256.html" class="toc__link">
                      <i class="fas fa-file-alt"></i> 16256번 Painting the Wall
                    </a>
                  </li>
                
                  <li>
                    <a href="/random-solve/c++/2025/05/30/7663.html" class="toc__link">
                      <i class="fas fa-file-alt"></i> 7663번 Dreadful Deadlines
                    </a>
                  </li>
                
                
                  <li>
                    <a href="/board?path=random-solve%2FC%2B%2B%2F" class="toc__link more-posts">
                      <i class="fas fa-ellipsis-h"></i> 더보기
                    </a>
                  </li>
                
              </ul>
            
            
            <ul class="toc__menu submenu">
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
            </ul>
          </li>
        
          
          
          
          
          
          
          <li class="toc__item depth-1" data-path="random-solve/Java/" data-total-posts="8">
            <div class="toc__menu-title">
              <span class="folder-toggle">
                <i class="fas fa-folder-open"></i>
              </span>
              <span class="folder-name">Java</span>
              
              
                <span class="post-count">8</span>
              
            </div>
            
            
              <ul class="toc__menu posts-list">
                
                  <li>
                    <a href="/random-solve/java/2025/06/13/24008.html" class="toc__link">
                      <i class="fas fa-file-alt"></i> 24008번 Catch Them All
                    </a>
                  </li>
                
                  <li>
                    <a href="/random-solve/java/2025/06/10/21237.html" class="toc__link">
                      <i class="fas fa-file-alt"></i> 21237번 Clockwise Fence
                    </a>
                  </li>
                
                  <li>
                    <a href="/random-solve/java/2025/06/04/2784.html" class="toc__link">
                      <i class="fas fa-file-alt"></i> 2784번 가로 세로 퍼즐
                    </a>
                  </li>
                
                
                  <li>
                    <a href="/board?path=random-solve%2FJava%2F" class="toc__link more-posts">
                      <i class="fas fa-ellipsis-h"></i> 더보기
                    </a>
                  </li>
                
              </ul>
            
            
            <ul class="toc__menu submenu">
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
            </ul>
          </li>
        
          
          
          
          
          
          
          <li class="toc__item depth-1" data-path="random-solve/Python/" data-total-posts="9">
            <div class="toc__menu-title">
              <span class="folder-toggle">
                <i class="fas fa-folder-open"></i>
              </span>
              <span class="folder-name">Python</span>
              
              
                <span class="post-count">9</span>
              
            </div>
            
            
              <ul class="toc__menu posts-list">
                
                  <li>
                    <a href="/random-solve/python/2025/06/16/3655.html" class="toc__link">
                      <i class="fas fa-file-alt"></i> 3655번 먼저 가세요
                    </a>
                  </li>
                
                  <li>
                    <a href="/random-solve/python/2025/06/04/4676.html" class="toc__link">
                      <i class="fas fa-file-alt"></i> 4676번 Haiku Review
                    </a>
                  </li>
                
                  <li>
                    <a href="/random-solve/python/2025/06/02/11761.html" class="toc__link">
                      <i class="fas fa-file-alt"></i> 11761번 Shuffling Along
                    </a>
                  </li>
                
                
                  <li>
                    <a href="/board?path=random-solve%2FPython%2F" class="toc__link more-posts">
                      <i class="fas fa-ellipsis-h"></i> 더보기
                    </a>
                  </li>
                
              </ul>
            
            
            <ul class="toc__menu submenu">
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
            </ul>
          </li>
        
      </ul>
    </nav>
  </div>
</aside>

<link rel="stylesheet" href="/assets/css/main.css">
<script src="/assets/js/toc.js"></script> 
  </div>

  <div class="home-content">
    <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
      <meta itemprop="headline" content="던전 생성기 02">
      <meta itemprop="description" content="  개요  남은 두개의 알고리즘으로 맵 만들기즐 겁 다 !!  구현  1. Delaunay Triangulation + MST얘는 왜 두개가 합쳐졌느냐???우선 랜덤한 점을 방의 중심점으로 사용해 방을 넒힌다.  그리고 Delaunay Triangulation 알고리즘으로 모든 점을 삼각형으로 연결해각 삼각형의 외접원이 다른 점을 포함하지 않도록 최적의 삼각형 분할을 생성한다.마지막으로 MST 알고리즘은 모든 방을 연결하는 최소 비용의 통로를 생성한다.Delaunay Triangulation만 사용할 경우 모든 점이 서로 연결되어 너무 많은 통로가 생성되어 어지럽다.이를 커버하는게 MST의 역할이다.덕분에 자연스러운 방 배치와 효율적인 통로 연결이 이루어지게 된다.삼각형 생성이 중요한데 삼각형을 생성하는 것으로 아래와 같은 일들이 가능해진다.  국지적 연결을 최적화해 가까운 방들끼리 통로가 생기는 기반 마련  삼각형의 변이 후보 연결선이 됨  삼각형은 면을 채울 수 있는 기본 단위라 공간을 균형있게 분할하기 유리함이렇게 생성된 삼각형들을 MST가 간소화해 효율성을 확보한다.// 점 클래스class Point {    constructor(x, y) {        this.x = x;        this.y = y;    }    equals(other) {        return this.x === other.x &amp;&amp; this.y === other.y;    }}// 간선 클래스class Edge {    constructor(p1, p2) {        this.p1 = p1;        this.p2 = p2;        this.weight = Math.sqrt(            Math.pow(p2.x - p1.x, 2) + Math.pow(p2.y - p1.y, 2)        );    }}// 삼각형 클래스class Triangle {    constructor(p1, p2, p3) {        this.p1 = p1;        this.p2 = p2;        this.p3 = p3;    }    // 외접원의 중심과 반지름 계산    circumcircle() {        const d = 2 * (this.p1.x * (this.p2.y - this.p3.y) +                       this.p2.x * (this.p3.y - this.p1.y) +                       this.p3.x * (this.p1.y - this.p2.y));        const ux = ((this.p1.x * this.p1.x + this.p1.y * this.p1.y) * (this.p2.y - this.p3.y) +                   (this.p2.x * this.p2.x + this.p2.y * this.p2.y) * (this.p3.y - this.p1.y) +                   (this.p3.x * this.p3.x + this.p3.y * this.p3.y) * (this.p1.y - this.p2.y)) / d;        const uy = ((this.p1.x * this.p1.x + this.p1.y * this.p1.y) * (this.p3.x - this.p2.x) +                   (this.p2.x * this.p2.x + this.p2.y * this.p2.y) * (this.p1.x - this.p3.x) +                   (this.p3.x * this.p3.x + this.p3.y * this.p3.y) * (this.p2.x - this.p1.x)) / d;        const center = new Point(ux, uy);        const radius = Math.sqrt(            Math.pow(this.p1.x - center.x, 2) + Math.pow(this.p1.y - center.y, 2)        );        return { center, radius };    }    // 점이 외접원 내부에 있는지 확인    containsPoint(p) {        const { center, radius } = this.circumcircle();        const distance = Math.sqrt(            Math.pow(p.x - center.x, 2) + Math.pow(p.y - center.y, 2)        );        return distance &lt; radius;    }}async function startDelaunay() {    initMap();        // 랜덤 점 생성 (방의 중심점)    const points = [];    const numPoints = 20; // 방의 개수    const roomSize = 2; // 방 크기    const margin = 2; // 방 사이의 최소 간격        // 방이 겹치는지 확인    function isOverlapping(x, y, size) {        for (let dy = -size - margin; dy &lt;= size + margin; dy++) {            for (let dx = -size - margin; dx &lt;= size + margin; dx++) {                const nx = x + dx;                const ny = y + dy;                if (nx &gt;= 0 &amp;&amp; nx &lt; cols &amp;&amp; ny &gt;= 0 &amp;&amp; ny &lt; rows &amp;&amp; map[ny][nx] === 0) {                    return true;                }            }        }        return false;    }        // 안전한 위치 찾기    function findSafePosition() {        let x, y;        let attempts = 0;        const maxAttempts = 100;                do {            x = Math.floor(Math.random() * (cols - 2 * roomSize)) + roomSize;            y = Math.floor(Math.random() * (rows - 2 * roomSize)) + roomSize;            attempts++;        } while (isOverlapping(x, y, roomSize) &amp;&amp; attempts &lt; maxAttempts);                return attempts &lt; maxAttempts ? {x, y} : null;    }        // 방 생성    for (let i = 0; i &lt; numPoints; i++) {        const pos = findSafePosition();        if (!pos) continue; // 안전한 위치를 찾지 못하면 건너뛰기                points.push(new Point(pos.x, pos.y));                // 방 생성        for (let dy = -roomSize; dy &lt;= roomSize; dy++) {            for (let dx = -roomSize; dx &lt;= roomSize; dx++) {                const nx = pos.x + dx;                const ny = pos.y + dy;                if (nx &gt;= 0 &amp;&amp; nx &lt; cols &amp;&amp; ny &gt;= 0 &amp;&amp; ny &lt; rows) {                    map[ny][nx] = 0;                    drawCell(nx, ny, &#39;white&#39;);                }            }        }        await sleep(50);    }        const triangles = delaunayTriangulation(points);        // 간선 추출    const edges = new Set();    for (const triangle of triangles) {        edges.add(new Edge(triangle.p1, triangle.p2));        edges.add(new Edge(triangle.p2, triangle.p3));        edges.add(new Edge(triangle.p3, triangle.p1));    }        const mstEdges = kruskalMST(Array.from(edges));        // MST 간선을 따라 통로 생성    for (const edge of mstEdges) {        await createCorridor(edge.p1, edge.p2);    }        generateEntrance();}// Delaunay Triangulation 알고리즘function delaunayTriangulation(points) {    const triangles = [];        // 슈퍼 삼각형 생성 (모든 점을 포함하는 큰 삼각형)    // 초기 삼각형이 필요해 생성하며 나중에 제거함    const superTriangle = new Triangle(        new Point(-100, -100),        new Point(100, -100),        new Point(0, 100)    );    triangles.push(superTriangle);        for (const point of points) {        const badTriangles = [];                // 현재 점을 포함하는 삼각형 찾기        for (const triangle of triangles) {            if (triangle.containsPoint(point)) {                badTriangles.push(triangle);            }        }                // 나쁜 삼각형들의 간선 찾기        // 나쁜 삼각형은 너무 뾰족하거나 한 꼭지점에 너무 몰려 있는 못난 삼각형        const edges = new Set();        for (const triangle of badTriangles) {            edges.add(new Edge(triangle.p1, triangle.p2));            edges.add(new Edge(triangle.p2, triangle.p3));            edges.add(new Edge(triangle.p3, triangle.p1));        }                // 나쁜 삼각형 제거        for (const triangle of badTriangles) {            const index = triangles.indexOf(triangle);            if (index &gt; -1) {                triangles.splice(index, 1);            }        }                // 새로운 삼각형 생성        for (const edge of edges) {            triangles.push(new Triangle(edge.p1, edge.p2, point));        }    }        // 슈퍼 삼각형과 관련된 삼각형 제거    return triangles.filter(triangle =&gt;         !triangle.p1.equals(superTriangle.p1) &amp;&amp;        !triangle.p1.equals(superTriangle.p2) &amp;&amp;        !triangle.p1.equals(superTriangle.p3) &amp;&amp;        !triangle.p2.equals(superTriangle.p1) &amp;&amp;        !triangle.p2.equals(superTriangle.p2) &amp;&amp;        !triangle.p2.equals(superTriangle.p3) &amp;&amp;        !triangle.p3.equals(superTriangle.p1) &amp;&amp;        !triangle.p3.equals(superTriangle.p2) &amp;&amp;        !triangle.p3.equals(superTriangle.p3)    );}// Kruskal&#39;s MST 알고리즘function kruskalMST(edges) {    // 간선을 가중치 순으로 정렬    edges.sort((a, b) =&gt; a.weight - b.weight);        const mst = [];    const sets = new Map();        // 각 점을 독립적인 집합으로 초기화    for (const edge of edges) {        if (!sets.has(edge.p1)) sets.set(edge.p1, new Set([edge.p1]));        if (!sets.has(edge.p2)) sets.set(edge.p2, new Set([edge.p2]));    }        // 사이클을 형성하지 않는 간선만 선택    for (const edge of edges) {        const set1 = sets.get(edge.p1);        const set2 = sets.get(edge.p2);                if (set1 !== set2) {            mst.push(edge);                        // 두 집합 합치기            const union = new Set();            for (const p of set1) union.add(p);            for (const p of set2) union.add(p);            for (const point of union) {                sets.set(point, union);  // 각 포인트가 새로운 union 집합을 참조하도록 갱신            }        }    }        return mst;}// 두 점 사이의 통로 생성async function createCorridor(p1, p2) {    const dx = Math.sign(p2.x - p1.x);    const dy = Math.sign(p2.y - p1.y);        let x = p1.x;    let y = p1.y;        // x축 방향으로 먼저 이동    while (x !== p2.x) {        map[y][x] = 0;        drawCell(x, y, &#39;white&#39;);        x += dx;        await sleep(1);    }        // y축 방향으로 이동    while (y !== p2.y) {        map[y][x] = 0;        drawCell(x, y, &#39;white&#39;);        y += dy;        await sleep(1);    }}2. WFC 알고리즘다소 난해했던 알고리즘주변 셀에 따라 가능한 옵션을 줄이며 점차 결정하는 방식이다.규칙을 설정해두는게 무엇보다 중요하다.WFC는 Wave Function Collapse의 약자인데Wave Function은 모든 타일이 겹쳐진 상태를 의미하고 Collapse는 결정하는 과정을 말한다.다른 내용은 괜찮은데 엔트로피 개념이 갑자기 끼어들어서 헷갈렸다.WFC에서의 엔트로피는 셀의 불확실성 정도, 그 셀에서 가능한 타일 후보 수를 의미한다.가능한 타일이 많을수록 엔트로피가 높은 셀인 것.흐름은 아래와 같다.  모든 셀은 타일 후보를 가지고 시작  가장 적은 옵션을 가진 셀 선택(엔트로피가 가장 낮은 셀)  그 셀이 가능한 타일 중 하나를 무작위로 결정(collapse)  전파(Propagation)  결정과 전파 반복설정한 타일로 가득 채워진 맵을 얻을 수 있으며 타일을 잘 설정할수록 상당히 구조적인 맵이 나온다.나는 불확실성으로 가득찬게 좋아서 타일을 8개 맘대로 집어넣었더니 결과물이 깔끔해 보이진 않는다.개념을 확실히 정립하기 전에는 방 전체가 뚫린다던가 죄다 벽이라던가 구현이 어려웠다.그래도 전파되며 만들어지는 모습이 아름답다.// 2x2 타일 사전 정의const tiles = [    {        name: &quot;wall&quot;, // 전체 벽        data: [[1, 1], [1, 1]],        edges: { up: 1, right: 1, down: 1, left: 1 }    },    {        name: &quot;floor&quot;, // 전체 통로        data: [[0, 0], [0, 0]],        edges: { up: 0, right: 0, down: 0, left: 0 }    },    {        name: &quot;hall_h&quot;, // 수평 복도        data: [[1, 1], [0, 0]],        edges: { up: 1, right: 0, down: 1, left: 0 }    },    {        name: &quot;hall_v&quot;, // 수직 복도        data: [[1, 0], [1, 0]],        edges: { up: 0, right: 1, down: 0, left: 1 }    },    {        name: &quot;room_corner_top_left&quot;, // 위/왼쪽이 열린 방 구석        data: [[0, 0], [0, 1]],        edges: { up: 0, right: 0, down: 1, left: 0 }    },    {        name: &quot;room_corner_bottom_right&quot;, // 아래/오른쪽 열린 방 구석        data: [[1, 0], [0, 0]],        edges: { up: 1, right: 0, down: 0, left: 0 }    },    {        name: &quot;junction_T_up&quot;, // T자 모양 (위쪽 갈래)        data: [[0, 0], [1, 0]],        edges: { up: 0, right: 0, down: 1, left: 1 }    },    {        name: &quot;dead_end_left&quot;, // 왼쪽에만 열린 막다른길        data: [[1, 1], [0, 1]],        edges: { up: 1, right: 1, down: 1, left: 0 }    }];  // 붙으려는 상대방 타일의 방향을 찾기 위한 반대 방향 매핑const opposite = {    up: &quot;down&quot;,    down: &quot;up&quot;,    left: &quot;right&quot;,    right: &quot;left&quot;};// 타일 간 인접성 판단function compatible(tileA, tileB, direction) {    return tileA.edges[direction] === tileB.edges[opposite[direction]];}// 셀 클래스 (1칸마다 타일 1개)class WFC_TileCell {    constructor(x, y) {        this.x = x;        this.y = y;        this.options = tiles.slice(); // 가능한 타일들        this.collapsed = false;    }    collapse() {        const pick = this.options[Math.floor(Math.random() * this.options.length)];        this.options = [pick];        this.collapsed = true;        return pick;    }    getTile() {        return this.options[0];    }}async function startWFC() {    initMap();    const tileSize = 2; // 2x2 타일    const tileCols = Math.floor(cols / tileSize);    const tileRows = Math.floor(rows / tileSize);    const grid = Array.from({ length: tileRows }, (_, y) =&gt;        Array.from({ length: tileCols }, (_, x) =&gt; new WFC_TileCell(x, y))    );    // collapse 루프    let pending = grid.flat().filter(cell =&gt; !cell.collapsed);    while (pending.length &gt; 0) {        // 아직 collapse되지 않은 셀 중에서 가능한 옵션이 가장 적은 값 찾기        let minEntropy = pending.reduce((min, cell) =&gt; Math.min(min, cell.options.length), Infinity);        // 가능한 옵션 수가 최소인 셀들만 필터링        let choices = pending.filter(c =&gt; c.options.length === minEntropy);        // 그 중 하나를 랜덤 선택        let cell = choices[Math.floor(Math.random() * choices.length)];        const tile = cell.collapse();        // 타일을 실제 맵에 그리기        for (let dy = 0; dy &lt; tileSize; dy++) {        for (let dx = 0; dx &lt; tileSize; dx++) {            const mx = cell.x * tileSize + dx;            const my = cell.y * tileSize + dy;            if (mx &lt; cols &amp;&amp; my &lt; rows) {              map[my][mx] = tile.data[dy][dx];              drawCell(mx, my, tile.data[dy][dx] === 1 ? &#39;black&#39; : &#39;white&#39;);            }        }        await sleep(5);        // 주변 셀 옵션 줄이기        for (const [dir, [dx, dy]] of Object.entries({            up: [0, -1],            right: [1, 0],            down: [0, 1],            left: [-1, 0]            })) {                const nx = cell.x + dx;                const ny = cell.y + dy;                if (nx &lt; 0 || ny &lt; 0 || nx &gt;= tileCols || ny &gt;= tileRows) continue;                const neighbor = grid[ny][nx];                if (neighbor.collapsed) continue;                // 현재 셀과 호환되는 타일만 남김                neighbor.options = neighbor.options.filter(opt =&gt;                    compatible(tile, opt, dir)                );            }            pending = grid.flat().filter(c =&gt; !c.collapsed);        }    }    await generateEntrance();}  완성  Delaunay Triangulation + MSTWFC  반성  동굴 지형같은 구불구불 무작위보다 구조적인 지형을 구성하는게 무엇보다 더 어려운 느낌이다.우연하게 태어난 아름다움과 철저히 설계된 아름다움의 차이로 느껴진다.아 감성적인 하루  코드 확인    직접 해보기Delaunay Triangulation + MSTLink to GitHubWFCLink to GitHub">
      <meta itemprop="datePublished" content="2025-05-28T02:00:00+00:00">
      <meta itemprop="dateModified" content="2025-05-28T02:00:00+00:00">

      <div class="page__inner-wrap">
        
          <header>
            
<div class="post-category">
  <div class="category-path">
    <a href="/board?path=" class="category-link">Archive</a>
    
    
    
      <span class="separator">/</span>
      
      <a href="/board?path=one-pan" class="category-link">
        one-pan
      </a>
      
    
      <span class="separator">/</span>
      
      <a href="/board?path=one-pan%2FJavaScript" class="category-link">
        JavaScript
      </a>
      
    
  </div>
  <a href="/board?path=one-pan%2FJavaScript%2F" class="category-icon" title="리스트">
    <i class="fas fa-list-ul" aria-hidden="true"></i>
  </a>
</div>
 
            <h1 id="page-title" class="page__title" itemprop="headline">던전 생성기 02
</h1>
            


          </header>
        

        <section class="page__content" itemprop="text">
          <blockquote>
  <h4 id="개요">개요</h4>
  <hr />
</blockquote>

<p>남은 두개의 알고리즘으로 맵 만들기<br />
<span style="color: orange;"><strong>즐 겁 다 !!</strong></span></p>

<blockquote>
  <h4 id="구현">구현</h4>
  <hr />
</blockquote>

<h5 id="1-delaunay-triangulation--mst">1. Delaunay Triangulation + MST</h5>

<p>얘는 왜 두개가 합쳐졌느냐???</p>

<p>우선 랜덤한 점을 방의 중심점으로 사용해 방을 넒힌다.  <br />
그리고 Delaunay Triangulation 알고리즘으로 모든 점을 삼각형으로 연결해<br />
각 삼각형의 외접원이 다른 점을 포함하지 않도록 최적의 삼각형 분할을 생성한다.<br />
마지막으로 MST 알고리즘은 모든 방을 연결하는 최소 비용의 통로를 생성한다.</p>

<p>Delaunay Triangulation만 사용할 경우 모든 점이 서로 연결되어 너무 많은 통로가 생성되어 어지럽다.<br />
이를 커버하는게 MST의 역할이다.</p>

<p>덕분에 자연스러운 방 배치와 효율적인 통로 연결이 이루어지게 된다.</p>

<p>삼각형 생성이 중요한데 삼각형을 생성하는 것으로 아래와 같은 일들이 가능해진다.</p>
<ul>
  <li><span style="color: orange;"><strong>국지적 연결을 최적화해 가까운 방들끼리 통로가 생기는 기반 마련</strong></span></li>
  <li><span style="color: orange;"><strong>삼각형의 변이 후보 연결선이 됨</strong></span></li>
  <li><span style="color: orange;"><strong>삼각형은 면을 채울 수 있는 기본 단위라 공간을 균형있게 분할하기 유리함</strong></span></li>
</ul>

<p>이렇게 생성된 삼각형들을 MST가 간소화해 효율성을 확보한다.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// 점 클래스</span>
<span class="kd">class</span> <span class="nc">Point</span> <span class="p">{</span>
    <span class="nf">constructor</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="nx">x</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="nx">y</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="nf">equals</span><span class="p">(</span><span class="nx">other</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">x</span> <span class="o">===</span> <span class="nx">other</span><span class="p">.</span><span class="nx">x</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="p">.</span><span class="nx">y</span> <span class="o">===</span> <span class="nx">other</span><span class="p">.</span><span class="nx">y</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// 간선 클래스</span>
<span class="kd">class</span> <span class="nc">Edge</span> <span class="p">{</span>
    <span class="nf">constructor</span><span class="p">(</span><span class="nx">p1</span><span class="p">,</span> <span class="nx">p2</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">p1</span> <span class="o">=</span> <span class="nx">p1</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">p2</span> <span class="o">=</span> <span class="nx">p2</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">weight</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nf">sqrt</span><span class="p">(</span>
            <span class="nb">Math</span><span class="p">.</span><span class="nf">pow</span><span class="p">(</span><span class="nx">p2</span><span class="p">.</span><span class="nx">x</span> <span class="o">-</span> <span class="nx">p1</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="nb">Math</span><span class="p">.</span><span class="nf">pow</span><span class="p">(</span><span class="nx">p2</span><span class="p">.</span><span class="nx">y</span> <span class="o">-</span> <span class="nx">p1</span><span class="p">.</span><span class="nx">y</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
        <span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// 삼각형 클래스</span>
<span class="kd">class</span> <span class="nc">Triangle</span> <span class="p">{</span>
    <span class="nf">constructor</span><span class="p">(</span><span class="nx">p1</span><span class="p">,</span> <span class="nx">p2</span><span class="p">,</span> <span class="nx">p3</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">p1</span> <span class="o">=</span> <span class="nx">p1</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">p2</span> <span class="o">=</span> <span class="nx">p2</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">p3</span> <span class="o">=</span> <span class="nx">p3</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1">// 외접원의 중심과 반지름 계산</span>
    <span class="nf">circumcircle</span><span class="p">()</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">d</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">p1</span><span class="p">.</span><span class="nx">x</span> <span class="o">*</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">p2</span><span class="p">.</span><span class="nx">y</span> <span class="o">-</span> <span class="k">this</span><span class="p">.</span><span class="nx">p3</span><span class="p">.</span><span class="nx">y</span><span class="p">)</span> <span class="o">+</span> 
                      <span class="k">this</span><span class="p">.</span><span class="nx">p2</span><span class="p">.</span><span class="nx">x</span> <span class="o">*</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">p3</span><span class="p">.</span><span class="nx">y</span> <span class="o">-</span> <span class="k">this</span><span class="p">.</span><span class="nx">p1</span><span class="p">.</span><span class="nx">y</span><span class="p">)</span> <span class="o">+</span> 
                      <span class="k">this</span><span class="p">.</span><span class="nx">p3</span><span class="p">.</span><span class="nx">x</span> <span class="o">*</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">p1</span><span class="p">.</span><span class="nx">y</span> <span class="o">-</span> <span class="k">this</span><span class="p">.</span><span class="nx">p2</span><span class="p">.</span><span class="nx">y</span><span class="p">));</span>
        <span class="kd">const</span> <span class="nx">ux</span> <span class="o">=</span> <span class="p">((</span><span class="k">this</span><span class="p">.</span><span class="nx">p1</span><span class="p">.</span><span class="nx">x</span> <span class="o">*</span> <span class="k">this</span><span class="p">.</span><span class="nx">p1</span><span class="p">.</span><span class="nx">x</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">p1</span><span class="p">.</span><span class="nx">y</span> <span class="o">*</span> <span class="k">this</span><span class="p">.</span><span class="nx">p1</span><span class="p">.</span><span class="nx">y</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">p2</span><span class="p">.</span><span class="nx">y</span> <span class="o">-</span> <span class="k">this</span><span class="p">.</span><span class="nx">p3</span><span class="p">.</span><span class="nx">y</span><span class="p">)</span> <span class="o">+</span>
                   <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">p2</span><span class="p">.</span><span class="nx">x</span> <span class="o">*</span> <span class="k">this</span><span class="p">.</span><span class="nx">p2</span><span class="p">.</span><span class="nx">x</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">p2</span><span class="p">.</span><span class="nx">y</span> <span class="o">*</span> <span class="k">this</span><span class="p">.</span><span class="nx">p2</span><span class="p">.</span><span class="nx">y</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">p3</span><span class="p">.</span><span class="nx">y</span> <span class="o">-</span> <span class="k">this</span><span class="p">.</span><span class="nx">p1</span><span class="p">.</span><span class="nx">y</span><span class="p">)</span> <span class="o">+</span>
                   <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">p3</span><span class="p">.</span><span class="nx">x</span> <span class="o">*</span> <span class="k">this</span><span class="p">.</span><span class="nx">p3</span><span class="p">.</span><span class="nx">x</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">p3</span><span class="p">.</span><span class="nx">y</span> <span class="o">*</span> <span class="k">this</span><span class="p">.</span><span class="nx">p3</span><span class="p">.</span><span class="nx">y</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">p1</span><span class="p">.</span><span class="nx">y</span> <span class="o">-</span> <span class="k">this</span><span class="p">.</span><span class="nx">p2</span><span class="p">.</span><span class="nx">y</span><span class="p">))</span> <span class="o">/</span> <span class="nx">d</span><span class="p">;</span>
        <span class="kd">const</span> <span class="nx">uy</span> <span class="o">=</span> <span class="p">((</span><span class="k">this</span><span class="p">.</span><span class="nx">p1</span><span class="p">.</span><span class="nx">x</span> <span class="o">*</span> <span class="k">this</span><span class="p">.</span><span class="nx">p1</span><span class="p">.</span><span class="nx">x</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">p1</span><span class="p">.</span><span class="nx">y</span> <span class="o">*</span> <span class="k">this</span><span class="p">.</span><span class="nx">p1</span><span class="p">.</span><span class="nx">y</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">p3</span><span class="p">.</span><span class="nx">x</span> <span class="o">-</span> <span class="k">this</span><span class="p">.</span><span class="nx">p2</span><span class="p">.</span><span class="nx">x</span><span class="p">)</span> <span class="o">+</span>
                   <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">p2</span><span class="p">.</span><span class="nx">x</span> <span class="o">*</span> <span class="k">this</span><span class="p">.</span><span class="nx">p2</span><span class="p">.</span><span class="nx">x</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">p2</span><span class="p">.</span><span class="nx">y</span> <span class="o">*</span> <span class="k">this</span><span class="p">.</span><span class="nx">p2</span><span class="p">.</span><span class="nx">y</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">p1</span><span class="p">.</span><span class="nx">x</span> <span class="o">-</span> <span class="k">this</span><span class="p">.</span><span class="nx">p3</span><span class="p">.</span><span class="nx">x</span><span class="p">)</span> <span class="o">+</span>
                   <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">p3</span><span class="p">.</span><span class="nx">x</span> <span class="o">*</span> <span class="k">this</span><span class="p">.</span><span class="nx">p3</span><span class="p">.</span><span class="nx">x</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">p3</span><span class="p">.</span><span class="nx">y</span> <span class="o">*</span> <span class="k">this</span><span class="p">.</span><span class="nx">p3</span><span class="p">.</span><span class="nx">y</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">p2</span><span class="p">.</span><span class="nx">x</span> <span class="o">-</span> <span class="k">this</span><span class="p">.</span><span class="nx">p1</span><span class="p">.</span><span class="nx">x</span><span class="p">))</span> <span class="o">/</span> <span class="nx">d</span><span class="p">;</span>
        <span class="kd">const</span> <span class="nx">center</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Point</span><span class="p">(</span><span class="nx">ux</span><span class="p">,</span> <span class="nx">uy</span><span class="p">);</span>
        <span class="kd">const</span> <span class="nx">radius</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nf">sqrt</span><span class="p">(</span>
            <span class="nb">Math</span><span class="p">.</span><span class="nf">pow</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">p1</span><span class="p">.</span><span class="nx">x</span> <span class="o">-</span> <span class="nx">center</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="nb">Math</span><span class="p">.</span><span class="nf">pow</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">p1</span><span class="p">.</span><span class="nx">y</span> <span class="o">-</span> <span class="nx">center</span><span class="p">.</span><span class="nx">y</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
        <span class="p">);</span>
        <span class="k">return</span> <span class="p">{</span> <span class="nx">center</span><span class="p">,</span> <span class="nx">radius</span> <span class="p">};</span>
    <span class="p">}</span>

    <span class="c1">// 점이 외접원 내부에 있는지 확인</span>
    <span class="nf">containsPoint</span><span class="p">(</span><span class="nx">p</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="p">{</span> <span class="nx">center</span><span class="p">,</span> <span class="nx">radius</span> <span class="p">}</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nf">circumcircle</span><span class="p">();</span>
        <span class="kd">const</span> <span class="nx">distance</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nf">sqrt</span><span class="p">(</span>
            <span class="nb">Math</span><span class="p">.</span><span class="nf">pow</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">x</span> <span class="o">-</span> <span class="nx">center</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="nb">Math</span><span class="p">.</span><span class="nf">pow</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">y</span> <span class="o">-</span> <span class="nx">center</span><span class="p">.</span><span class="nx">y</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
        <span class="p">);</span>
        <span class="k">return</span> <span class="nx">distance</span> <span class="o">&lt;</span> <span class="nx">radius</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">async</span> <span class="kd">function</span> <span class="nf">startDelaunay</span><span class="p">()</span> <span class="p">{</span>
    <span class="nf">initMap</span><span class="p">();</span>
    
    <span class="c1">// 랜덤 점 생성 (방의 중심점)</span>
    <span class="kd">const</span> <span class="nx">points</span> <span class="o">=</span> <span class="p">[];</span>
    <span class="kd">const</span> <span class="nx">numPoints</span> <span class="o">=</span> <span class="mi">20</span><span class="p">;</span> <span class="c1">// 방의 개수</span>
    <span class="kd">const</span> <span class="nx">roomSize</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span> <span class="c1">// 방 크기</span>
    <span class="kd">const</span> <span class="nx">margin</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span> <span class="c1">// 방 사이의 최소 간격</span>
    
    <span class="c1">// 방이 겹치는지 확인</span>
    <span class="kd">function</span> <span class="nf">isOverlapping</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span> <span class="nx">size</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">for </span><span class="p">(</span><span class="kd">let</span> <span class="nx">dy</span> <span class="o">=</span> <span class="o">-</span><span class="nx">size</span> <span class="o">-</span> <span class="nx">margin</span><span class="p">;</span> <span class="nx">dy</span> <span class="o">&lt;=</span> <span class="nx">size</span> <span class="o">+</span> <span class="nx">margin</span><span class="p">;</span> <span class="nx">dy</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">for </span><span class="p">(</span><span class="kd">let</span> <span class="nx">dx</span> <span class="o">=</span> <span class="o">-</span><span class="nx">size</span> <span class="o">-</span> <span class="nx">margin</span><span class="p">;</span> <span class="nx">dx</span> <span class="o">&lt;=</span> <span class="nx">size</span> <span class="o">+</span> <span class="nx">margin</span><span class="p">;</span> <span class="nx">dx</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
                <span class="kd">const</span> <span class="nx">nx</span> <span class="o">=</span> <span class="nx">x</span> <span class="o">+</span> <span class="nx">dx</span><span class="p">;</span>
                <span class="kd">const</span> <span class="nx">ny</span> <span class="o">=</span> <span class="nx">y</span> <span class="o">+</span> <span class="nx">dy</span><span class="p">;</span>
                <span class="k">if </span><span class="p">(</span><span class="nx">nx</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="nx">nx</span> <span class="o">&lt;</span> <span class="nx">cols</span> <span class="o">&amp;&amp;</span> <span class="nx">ny</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="nx">ny</span> <span class="o">&lt;</span> <span class="nx">rows</span> <span class="o">&amp;&amp;</span> <span class="nx">map</span><span class="p">[</span><span class="nx">ny</span><span class="p">][</span><span class="nx">nx</span><span class="p">]</span> <span class="o">===</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
    <span class="p">}</span>
    
    <span class="c1">// 안전한 위치 찾기</span>
    <span class="kd">function</span> <span class="nf">findSafePosition</span><span class="p">()</span> <span class="p">{</span>
        <span class="kd">let</span> <span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">;</span>
        <span class="kd">let</span> <span class="nx">attempts</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="kd">const</span> <span class="nx">maxAttempts</span> <span class="o">=</span> <span class="mi">100</span><span class="p">;</span>
        
        <span class="k">do</span> <span class="p">{</span>
            <span class="nx">x</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nf">floor</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nf">random</span><span class="p">()</span> <span class="o">*</span> <span class="p">(</span><span class="nx">cols</span> <span class="o">-</span> <span class="mi">2</span> <span class="o">*</span> <span class="nx">roomSize</span><span class="p">))</span> <span class="o">+</span> <span class="nx">roomSize</span><span class="p">;</span>
            <span class="nx">y</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nf">floor</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nf">random</span><span class="p">()</span> <span class="o">*</span> <span class="p">(</span><span class="nx">rows</span> <span class="o">-</span> <span class="mi">2</span> <span class="o">*</span> <span class="nx">roomSize</span><span class="p">))</span> <span class="o">+</span> <span class="nx">roomSize</span><span class="p">;</span>
            <span class="nx">attempts</span><span class="o">++</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">while </span><span class="p">(</span><span class="nf">isOverlapping</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span> <span class="nx">roomSize</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">attempts</span> <span class="o">&lt;</span> <span class="nx">maxAttempts</span><span class="p">);</span>
        
        <span class="k">return</span> <span class="nx">attempts</span> <span class="o">&lt;</span> <span class="nx">maxAttempts</span> <span class="p">?</span> <span class="p">{</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">}</span> <span class="p">:</span> <span class="kc">null</span><span class="p">;</span>
    <span class="p">}</span>
    
    <span class="c1">// 방 생성</span>
    <span class="k">for </span><span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">numPoints</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">pos</span> <span class="o">=</span> <span class="nf">findSafePosition</span><span class="p">();</span>
        <span class="k">if </span><span class="p">(</span><span class="o">!</span><span class="nx">pos</span><span class="p">)</span> <span class="k">continue</span><span class="p">;</span> <span class="c1">// 안전한 위치를 찾지 못하면 건너뛰기</span>
        
        <span class="nx">points</span><span class="p">.</span><span class="nf">push</span><span class="p">(</span><span class="k">new</span> <span class="nc">Point</span><span class="p">(</span><span class="nx">pos</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span> <span class="nx">pos</span><span class="p">.</span><span class="nx">y</span><span class="p">));</span>
        
        <span class="c1">// 방 생성</span>
        <span class="k">for </span><span class="p">(</span><span class="kd">let</span> <span class="nx">dy</span> <span class="o">=</span> <span class="o">-</span><span class="nx">roomSize</span><span class="p">;</span> <span class="nx">dy</span> <span class="o">&lt;=</span> <span class="nx">roomSize</span><span class="p">;</span> <span class="nx">dy</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">for </span><span class="p">(</span><span class="kd">let</span> <span class="nx">dx</span> <span class="o">=</span> <span class="o">-</span><span class="nx">roomSize</span><span class="p">;</span> <span class="nx">dx</span> <span class="o">&lt;=</span> <span class="nx">roomSize</span><span class="p">;</span> <span class="nx">dx</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
                <span class="kd">const</span> <span class="nx">nx</span> <span class="o">=</span> <span class="nx">pos</span><span class="p">.</span><span class="nx">x</span> <span class="o">+</span> <span class="nx">dx</span><span class="p">;</span>
                <span class="kd">const</span> <span class="nx">ny</span> <span class="o">=</span> <span class="nx">pos</span><span class="p">.</span><span class="nx">y</span> <span class="o">+</span> <span class="nx">dy</span><span class="p">;</span>
                <span class="k">if </span><span class="p">(</span><span class="nx">nx</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="nx">nx</span> <span class="o">&lt;</span> <span class="nx">cols</span> <span class="o">&amp;&amp;</span> <span class="nx">ny</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="nx">ny</span> <span class="o">&lt;</span> <span class="nx">rows</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">map</span><span class="p">[</span><span class="nx">ny</span><span class="p">][</span><span class="nx">nx</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
                    <span class="nf">drawCell</span><span class="p">(</span><span class="nx">nx</span><span class="p">,</span> <span class="nx">ny</span><span class="p">,</span> <span class="dl">'</span><span class="s1">white</span><span class="dl">'</span><span class="p">);</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">await</span> <span class="nf">sleep</span><span class="p">(</span><span class="mi">50</span><span class="p">);</span>
    <span class="p">}</span>
    
    <span class="kd">const</span> <span class="nx">triangles</span> <span class="o">=</span> <span class="nf">delaunayTriangulation</span><span class="p">(</span><span class="nx">points</span><span class="p">);</span>
    
    <span class="c1">// 간선 추출</span>
    <span class="kd">const</span> <span class="nx">edges</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Set</span><span class="p">();</span>
    <span class="k">for </span><span class="p">(</span><span class="kd">const</span> <span class="nx">triangle</span> <span class="k">of</span> <span class="nx">triangles</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">edges</span><span class="p">.</span><span class="nf">add</span><span class="p">(</span><span class="k">new</span> <span class="nc">Edge</span><span class="p">(</span><span class="nx">triangle</span><span class="p">.</span><span class="nx">p1</span><span class="p">,</span> <span class="nx">triangle</span><span class="p">.</span><span class="nx">p2</span><span class="p">));</span>
        <span class="nx">edges</span><span class="p">.</span><span class="nf">add</span><span class="p">(</span><span class="k">new</span> <span class="nc">Edge</span><span class="p">(</span><span class="nx">triangle</span><span class="p">.</span><span class="nx">p2</span><span class="p">,</span> <span class="nx">triangle</span><span class="p">.</span><span class="nx">p3</span><span class="p">));</span>
        <span class="nx">edges</span><span class="p">.</span><span class="nf">add</span><span class="p">(</span><span class="k">new</span> <span class="nc">Edge</span><span class="p">(</span><span class="nx">triangle</span><span class="p">.</span><span class="nx">p3</span><span class="p">,</span> <span class="nx">triangle</span><span class="p">.</span><span class="nx">p1</span><span class="p">));</span>
    <span class="p">}</span>
    
    <span class="kd">const</span> <span class="nx">mstEdges</span> <span class="o">=</span> <span class="nf">kruskalMST</span><span class="p">(</span><span class="nb">Array</span><span class="p">.</span><span class="k">from</span><span class="p">(</span><span class="nx">edges</span><span class="p">));</span>
    
    <span class="c1">// MST 간선을 따라 통로 생성</span>
    <span class="k">for </span><span class="p">(</span><span class="kd">const</span> <span class="nx">edge</span> <span class="k">of</span> <span class="nx">mstEdges</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">await</span> <span class="nf">createCorridor</span><span class="p">(</span><span class="nx">edge</span><span class="p">.</span><span class="nx">p1</span><span class="p">,</span> <span class="nx">edge</span><span class="p">.</span><span class="nx">p2</span><span class="p">);</span>
    <span class="p">}</span>
    
    <span class="nf">generateEntrance</span><span class="p">();</span>
<span class="p">}</span>

<span class="c1">// Delaunay Triangulation 알고리즘</span>
<span class="kd">function</span> <span class="nf">delaunayTriangulation</span><span class="p">(</span><span class="nx">points</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">triangles</span> <span class="o">=</span> <span class="p">[];</span>
    
    <span class="c1">// 슈퍼 삼각형 생성 (모든 점을 포함하는 큰 삼각형)</span>
    <span class="c1">// 초기 삼각형이 필요해 생성하며 나중에 제거함</span>
    <span class="kd">const</span> <span class="nx">superTriangle</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Triangle</span><span class="p">(</span>
        <span class="k">new</span> <span class="nc">Point</span><span class="p">(</span><span class="o">-</span><span class="mi">100</span><span class="p">,</span> <span class="o">-</span><span class="mi">100</span><span class="p">),</span>
        <span class="k">new</span> <span class="nc">Point</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="o">-</span><span class="mi">100</span><span class="p">),</span>
        <span class="k">new</span> <span class="nc">Point</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
    <span class="p">);</span>
    <span class="nx">triangles</span><span class="p">.</span><span class="nf">push</span><span class="p">(</span><span class="nx">superTriangle</span><span class="p">);</span>
    
    <span class="k">for </span><span class="p">(</span><span class="kd">const</span> <span class="nx">point</span> <span class="k">of</span> <span class="nx">points</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">badTriangles</span> <span class="o">=</span> <span class="p">[];</span>
        
        <span class="c1">// 현재 점을 포함하는 삼각형 찾기</span>
        <span class="k">for </span><span class="p">(</span><span class="kd">const</span> <span class="nx">triangle</span> <span class="k">of</span> <span class="nx">triangles</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if </span><span class="p">(</span><span class="nx">triangle</span><span class="p">.</span><span class="nf">containsPoint</span><span class="p">(</span><span class="nx">point</span><span class="p">))</span> <span class="p">{</span>
                <span class="nx">badTriangles</span><span class="p">.</span><span class="nf">push</span><span class="p">(</span><span class="nx">triangle</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">}</span>
        
        <span class="c1">// 나쁜 삼각형들의 간선 찾기</span>
        <span class="c1">// 나쁜 삼각형은 너무 뾰족하거나 한 꼭지점에 너무 몰려 있는 못난 삼각형</span>
        <span class="kd">const</span> <span class="nx">edges</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Set</span><span class="p">();</span>
        <span class="k">for </span><span class="p">(</span><span class="kd">const</span> <span class="nx">triangle</span> <span class="k">of</span> <span class="nx">badTriangles</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">edges</span><span class="p">.</span><span class="nf">add</span><span class="p">(</span><span class="k">new</span> <span class="nc">Edge</span><span class="p">(</span><span class="nx">triangle</span><span class="p">.</span><span class="nx">p1</span><span class="p">,</span> <span class="nx">triangle</span><span class="p">.</span><span class="nx">p2</span><span class="p">));</span>
            <span class="nx">edges</span><span class="p">.</span><span class="nf">add</span><span class="p">(</span><span class="k">new</span> <span class="nc">Edge</span><span class="p">(</span><span class="nx">triangle</span><span class="p">.</span><span class="nx">p2</span><span class="p">,</span> <span class="nx">triangle</span><span class="p">.</span><span class="nx">p3</span><span class="p">));</span>
            <span class="nx">edges</span><span class="p">.</span><span class="nf">add</span><span class="p">(</span><span class="k">new</span> <span class="nc">Edge</span><span class="p">(</span><span class="nx">triangle</span><span class="p">.</span><span class="nx">p3</span><span class="p">,</span> <span class="nx">triangle</span><span class="p">.</span><span class="nx">p1</span><span class="p">));</span>
        <span class="p">}</span>
        
        <span class="c1">// 나쁜 삼각형 제거</span>
        <span class="k">for </span><span class="p">(</span><span class="kd">const</span> <span class="nx">triangle</span> <span class="k">of</span> <span class="nx">badTriangles</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">const</span> <span class="nx">index</span> <span class="o">=</span> <span class="nx">triangles</span><span class="p">.</span><span class="nf">indexOf</span><span class="p">(</span><span class="nx">triangle</span><span class="p">);</span>
            <span class="k">if </span><span class="p">(</span><span class="nx">index</span> <span class="o">&gt;</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">triangles</span><span class="p">.</span><span class="nf">splice</span><span class="p">(</span><span class="nx">index</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">}</span>
        
        <span class="c1">// 새로운 삼각형 생성</span>
        <span class="k">for </span><span class="p">(</span><span class="kd">const</span> <span class="nx">edge</span> <span class="k">of</span> <span class="nx">edges</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">triangles</span><span class="p">.</span><span class="nf">push</span><span class="p">(</span><span class="k">new</span> <span class="nc">Triangle</span><span class="p">(</span><span class="nx">edge</span><span class="p">.</span><span class="nx">p1</span><span class="p">,</span> <span class="nx">edge</span><span class="p">.</span><span class="nx">p2</span><span class="p">,</span> <span class="nx">point</span><span class="p">));</span>
        <span class="p">}</span>
    <span class="p">}</span>
    
    <span class="c1">// 슈퍼 삼각형과 관련된 삼각형 제거</span>
    <span class="k">return</span> <span class="nx">triangles</span><span class="p">.</span><span class="nf">filter</span><span class="p">(</span><span class="nx">triangle</span> <span class="o">=&gt;</span> 
        <span class="o">!</span><span class="nx">triangle</span><span class="p">.</span><span class="nx">p1</span><span class="p">.</span><span class="nf">equals</span><span class="p">(</span><span class="nx">superTriangle</span><span class="p">.</span><span class="nx">p1</span><span class="p">)</span> <span class="o">&amp;&amp;</span>
        <span class="o">!</span><span class="nx">triangle</span><span class="p">.</span><span class="nx">p1</span><span class="p">.</span><span class="nf">equals</span><span class="p">(</span><span class="nx">superTriangle</span><span class="p">.</span><span class="nx">p2</span><span class="p">)</span> <span class="o">&amp;&amp;</span>
        <span class="o">!</span><span class="nx">triangle</span><span class="p">.</span><span class="nx">p1</span><span class="p">.</span><span class="nf">equals</span><span class="p">(</span><span class="nx">superTriangle</span><span class="p">.</span><span class="nx">p3</span><span class="p">)</span> <span class="o">&amp;&amp;</span>
        <span class="o">!</span><span class="nx">triangle</span><span class="p">.</span><span class="nx">p2</span><span class="p">.</span><span class="nf">equals</span><span class="p">(</span><span class="nx">superTriangle</span><span class="p">.</span><span class="nx">p1</span><span class="p">)</span> <span class="o">&amp;&amp;</span>
        <span class="o">!</span><span class="nx">triangle</span><span class="p">.</span><span class="nx">p2</span><span class="p">.</span><span class="nf">equals</span><span class="p">(</span><span class="nx">superTriangle</span><span class="p">.</span><span class="nx">p2</span><span class="p">)</span> <span class="o">&amp;&amp;</span>
        <span class="o">!</span><span class="nx">triangle</span><span class="p">.</span><span class="nx">p2</span><span class="p">.</span><span class="nf">equals</span><span class="p">(</span><span class="nx">superTriangle</span><span class="p">.</span><span class="nx">p3</span><span class="p">)</span> <span class="o">&amp;&amp;</span>
        <span class="o">!</span><span class="nx">triangle</span><span class="p">.</span><span class="nx">p3</span><span class="p">.</span><span class="nf">equals</span><span class="p">(</span><span class="nx">superTriangle</span><span class="p">.</span><span class="nx">p1</span><span class="p">)</span> <span class="o">&amp;&amp;</span>
        <span class="o">!</span><span class="nx">triangle</span><span class="p">.</span><span class="nx">p3</span><span class="p">.</span><span class="nf">equals</span><span class="p">(</span><span class="nx">superTriangle</span><span class="p">.</span><span class="nx">p2</span><span class="p">)</span> <span class="o">&amp;&amp;</span>
        <span class="o">!</span><span class="nx">triangle</span><span class="p">.</span><span class="nx">p3</span><span class="p">.</span><span class="nf">equals</span><span class="p">(</span><span class="nx">superTriangle</span><span class="p">.</span><span class="nx">p3</span><span class="p">)</span>
    <span class="p">);</span>
<span class="p">}</span>

<span class="c1">// Kruskal's MST 알고리즘</span>
<span class="kd">function</span> <span class="nf">kruskalMST</span><span class="p">(</span><span class="nx">edges</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// 간선을 가중치 순으로 정렬</span>
    <span class="nx">edges</span><span class="p">.</span><span class="nf">sort</span><span class="p">((</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">a</span><span class="p">.</span><span class="nx">weight</span> <span class="o">-</span> <span class="nx">b</span><span class="p">.</span><span class="nx">weight</span><span class="p">);</span>
    
    <span class="kd">const</span> <span class="nx">mst</span> <span class="o">=</span> <span class="p">[];</span>
    <span class="kd">const</span> <span class="nx">sets</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Map</span><span class="p">();</span>
    
    <span class="c1">// 각 점을 독립적인 집합으로 초기화</span>
    <span class="k">for </span><span class="p">(</span><span class="kd">const</span> <span class="nx">edge</span> <span class="k">of</span> <span class="nx">edges</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if </span><span class="p">(</span><span class="o">!</span><span class="nx">sets</span><span class="p">.</span><span class="nf">has</span><span class="p">(</span><span class="nx">edge</span><span class="p">.</span><span class="nx">p1</span><span class="p">))</span> <span class="nx">sets</span><span class="p">.</span><span class="nf">set</span><span class="p">(</span><span class="nx">edge</span><span class="p">.</span><span class="nx">p1</span><span class="p">,</span> <span class="k">new</span> <span class="nc">Set</span><span class="p">([</span><span class="nx">edge</span><span class="p">.</span><span class="nx">p1</span><span class="p">]));</span>
        <span class="k">if </span><span class="p">(</span><span class="o">!</span><span class="nx">sets</span><span class="p">.</span><span class="nf">has</span><span class="p">(</span><span class="nx">edge</span><span class="p">.</span><span class="nx">p2</span><span class="p">))</span> <span class="nx">sets</span><span class="p">.</span><span class="nf">set</span><span class="p">(</span><span class="nx">edge</span><span class="p">.</span><span class="nx">p2</span><span class="p">,</span> <span class="k">new</span> <span class="nc">Set</span><span class="p">([</span><span class="nx">edge</span><span class="p">.</span><span class="nx">p2</span><span class="p">]));</span>
    <span class="p">}</span>
    
    <span class="c1">// 사이클을 형성하지 않는 간선만 선택</span>
    <span class="k">for </span><span class="p">(</span><span class="kd">const</span> <span class="nx">edge</span> <span class="k">of</span> <span class="nx">edges</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">set1</span> <span class="o">=</span> <span class="nx">sets</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="nx">edge</span><span class="p">.</span><span class="nx">p1</span><span class="p">);</span>
        <span class="kd">const</span> <span class="nx">set2</span> <span class="o">=</span> <span class="nx">sets</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="nx">edge</span><span class="p">.</span><span class="nx">p2</span><span class="p">);</span>
        
        <span class="k">if </span><span class="p">(</span><span class="nx">set1</span> <span class="o">!==</span> <span class="nx">set2</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">mst</span><span class="p">.</span><span class="nf">push</span><span class="p">(</span><span class="nx">edge</span><span class="p">);</span>
            
            <span class="c1">// 두 집합 합치기</span>
            <span class="kd">const</span> <span class="nx">union</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Set</span><span class="p">();</span>
            <span class="k">for </span><span class="p">(</span><span class="kd">const</span> <span class="nx">p</span> <span class="k">of</span> <span class="nx">set1</span><span class="p">)</span> <span class="nx">union</span><span class="p">.</span><span class="nf">add</span><span class="p">(</span><span class="nx">p</span><span class="p">);</span>
            <span class="k">for </span><span class="p">(</span><span class="kd">const</span> <span class="nx">p</span> <span class="k">of</span> <span class="nx">set2</span><span class="p">)</span> <span class="nx">union</span><span class="p">.</span><span class="nf">add</span><span class="p">(</span><span class="nx">p</span><span class="p">);</span>

            <span class="k">for </span><span class="p">(</span><span class="kd">const</span> <span class="nx">point</span> <span class="k">of</span> <span class="nx">union</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">sets</span><span class="p">.</span><span class="nf">set</span><span class="p">(</span><span class="nx">point</span><span class="p">,</span> <span class="nx">union</span><span class="p">);</span>  <span class="c1">// 각 포인트가 새로운 union 집합을 참조하도록 갱신</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
    
    <span class="k">return</span> <span class="nx">mst</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// 두 점 사이의 통로 생성</span>
<span class="k">async</span> <span class="kd">function</span> <span class="nf">createCorridor</span><span class="p">(</span><span class="nx">p1</span><span class="p">,</span> <span class="nx">p2</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">dx</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nf">sign</span><span class="p">(</span><span class="nx">p2</span><span class="p">.</span><span class="nx">x</span> <span class="o">-</span> <span class="nx">p1</span><span class="p">.</span><span class="nx">x</span><span class="p">);</span>
    <span class="kd">const</span> <span class="nx">dy</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nf">sign</span><span class="p">(</span><span class="nx">p2</span><span class="p">.</span><span class="nx">y</span> <span class="o">-</span> <span class="nx">p1</span><span class="p">.</span><span class="nx">y</span><span class="p">);</span>
    
    <span class="kd">let</span> <span class="nx">x</span> <span class="o">=</span> <span class="nx">p1</span><span class="p">.</span><span class="nx">x</span><span class="p">;</span>
    <span class="kd">let</span> <span class="nx">y</span> <span class="o">=</span> <span class="nx">p1</span><span class="p">.</span><span class="nx">y</span><span class="p">;</span>
    
    <span class="c1">// x축 방향으로 먼저 이동</span>
    <span class="k">while </span><span class="p">(</span><span class="nx">x</span> <span class="o">!==</span> <span class="nx">p2</span><span class="p">.</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">map</span><span class="p">[</span><span class="nx">y</span><span class="p">][</span><span class="nx">x</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="nf">drawCell</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span> <span class="dl">'</span><span class="s1">white</span><span class="dl">'</span><span class="p">);</span>
        <span class="nx">x</span> <span class="o">+=</span> <span class="nx">dx</span><span class="p">;</span>
        <span class="k">await</span> <span class="nf">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
    <span class="p">}</span>
    
    <span class="c1">// y축 방향으로 이동</span>
    <span class="k">while </span><span class="p">(</span><span class="nx">y</span> <span class="o">!==</span> <span class="nx">p2</span><span class="p">.</span><span class="nx">y</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">map</span><span class="p">[</span><span class="nx">y</span><span class="p">][</span><span class="nx">x</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="nf">drawCell</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span> <span class="dl">'</span><span class="s1">white</span><span class="dl">'</span><span class="p">);</span>
        <span class="nx">y</span> <span class="o">+=</span> <span class="nx">dy</span><span class="p">;</span>
        <span class="k">await</span> <span class="nf">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h5 id="2-wfc-알고리즘">2. WFC 알고리즘</h5>

<p>다소 난해했던 알고리즘<br />
주변 셀에 따라 가능한 옵션을 줄이며 점차 결정하는 방식이다.<br />
규칙을 설정해두는게 무엇보다 중요하다.</p>

<p>WFC는 Wave Function Collapse의 약자인데<br />
Wave Function은 모든 타일이 겹쳐진 상태를 의미하고 Collapse는 결정하는 과정을 말한다.<br />
다른 내용은 괜찮은데 엔트로피 개념이 갑자기 끼어들어서 헷갈렸다.<br />
WFC에서의 <span style="color: orange;"><strong>엔트로피는 셀의 불확실성 정도, 그 셀에서 가능한 타일 후보 수</strong></span>를 의미한다.<br />
가능한 타일이 많을수록 엔트로피가 높은 셀인 것.</p>

<p>흐름은 아래와 같다.</p>
<ul>
  <li><span style="color: orange;"><strong>모든 셀은 타일 후보를 가지고 시작</strong></span></li>
  <li><span style="color: orange;"><strong>가장 적은 옵션을 가진 셀 선택(엔트로피가 가장 낮은 셀)</strong></span></li>
  <li><span style="color: orange;"><strong>그 셀이 가능한 타일 중 하나를 무작위로 결정(collapse)</strong></span></li>
  <li><span style="color: orange;"><strong>전파(Propagation)</strong></span></li>
  <li><span style="color: orange;"><strong>결정과 전파 반복</strong></span></li>
</ul>

<p>설정한 타일로 가득 채워진 맵을 얻을 수 있으며 타일을 잘 설정할수록 상당히 구조적인 맵이 나온다.<br />
나는 불확실성으로 가득찬게 좋아서 타일을 8개 맘대로 집어넣었더니 결과물이 깔끔해 보이진 않는다.</p>

<p>개념을 확실히 정립하기 전에는 방 전체가 뚫린다던가 죄다 벽이라던가 구현이 어려웠다.<br />
그래도 전파되며 만들어지는 모습이 아름답다.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// 2x2 타일 사전 정의</span>
<span class="kd">const</span> <span class="nx">tiles</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span>
        <span class="na">name</span><span class="p">:</span> <span class="dl">"</span><span class="s2">wall</span><span class="dl">"</span><span class="p">,</span> <span class="c1">// 전체 벽</span>
        <span class="na">data</span><span class="p">:</span> <span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">]],</span>
        <span class="na">edges</span><span class="p">:</span> <span class="p">{</span> <span class="na">up</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="na">right</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="na">down</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="na">left</span><span class="p">:</span> <span class="mi">1</span> <span class="p">}</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="na">name</span><span class="p">:</span> <span class="dl">"</span><span class="s2">floor</span><span class="dl">"</span><span class="p">,</span> <span class="c1">// 전체 통로</span>
        <span class="na">data</span><span class="p">:</span> <span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]],</span>
        <span class="na">edges</span><span class="p">:</span> <span class="p">{</span> <span class="na">up</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="na">right</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="na">down</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="na">left</span><span class="p">:</span> <span class="mi">0</span> <span class="p">}</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="na">name</span><span class="p">:</span> <span class="dl">"</span><span class="s2">hall_h</span><span class="dl">"</span><span class="p">,</span> <span class="c1">// 수평 복도</span>
        <span class="na">data</span><span class="p">:</span> <span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]],</span>
        <span class="na">edges</span><span class="p">:</span> <span class="p">{</span> <span class="na">up</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="na">right</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="na">down</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="na">left</span><span class="p">:</span> <span class="mi">0</span> <span class="p">}</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="na">name</span><span class="p">:</span> <span class="dl">"</span><span class="s2">hall_v</span><span class="dl">"</span><span class="p">,</span> <span class="c1">// 수직 복도</span>
        <span class="na">data</span><span class="p">:</span> <span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">]],</span>
        <span class="na">edges</span><span class="p">:</span> <span class="p">{</span> <span class="na">up</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="na">right</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="na">down</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="na">left</span><span class="p">:</span> <span class="mi">1</span> <span class="p">}</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="na">name</span><span class="p">:</span> <span class="dl">"</span><span class="s2">room_corner_top_left</span><span class="dl">"</span><span class="p">,</span> <span class="c1">// 위/왼쪽이 열린 방 구석</span>
        <span class="na">data</span><span class="p">:</span> <span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]],</span>
        <span class="na">edges</span><span class="p">:</span> <span class="p">{</span> <span class="na">up</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="na">right</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="na">down</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="na">left</span><span class="p">:</span> <span class="mi">0</span> <span class="p">}</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="na">name</span><span class="p">:</span> <span class="dl">"</span><span class="s2">room_corner_bottom_right</span><span class="dl">"</span><span class="p">,</span> <span class="c1">// 아래/오른쪽 열린 방 구석</span>
        <span class="na">data</span><span class="p">:</span> <span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]],</span>
        <span class="na">edges</span><span class="p">:</span> <span class="p">{</span> <span class="na">up</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="na">right</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="na">down</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="na">left</span><span class="p">:</span> <span class="mi">0</span> <span class="p">}</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="na">name</span><span class="p">:</span> <span class="dl">"</span><span class="s2">junction_T_up</span><span class="dl">"</span><span class="p">,</span> <span class="c1">// T자 모양 (위쪽 갈래)</span>
        <span class="na">data</span><span class="p">:</span> <span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">]],</span>
        <span class="na">edges</span><span class="p">:</span> <span class="p">{</span> <span class="na">up</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="na">right</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="na">down</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="na">left</span><span class="p">:</span> <span class="mi">1</span> <span class="p">}</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="na">name</span><span class="p">:</span> <span class="dl">"</span><span class="s2">dead_end_left</span><span class="dl">"</span><span class="p">,</span> <span class="c1">// 왼쪽에만 열린 막다른길</span>
        <span class="na">data</span><span class="p">:</span> <span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]],</span>
        <span class="na">edges</span><span class="p">:</span> <span class="p">{</span> <span class="na">up</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="na">right</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="na">down</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="na">left</span><span class="p">:</span> <span class="mi">0</span> <span class="p">}</span>
    <span class="p">}</span>
<span class="p">];</span>
  
<span class="c1">// 붙으려는 상대방 타일의 방향을 찾기 위한 반대 방향 매핑</span>
<span class="kd">const</span> <span class="nx">opposite</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">up</span><span class="p">:</span> <span class="dl">"</span><span class="s2">down</span><span class="dl">"</span><span class="p">,</span>
    <span class="na">down</span><span class="p">:</span> <span class="dl">"</span><span class="s2">up</span><span class="dl">"</span><span class="p">,</span>
    <span class="na">left</span><span class="p">:</span> <span class="dl">"</span><span class="s2">right</span><span class="dl">"</span><span class="p">,</span>
    <span class="na">right</span><span class="p">:</span> <span class="dl">"</span><span class="s2">left</span><span class="dl">"</span>
<span class="p">};</span>

<span class="c1">// 타일 간 인접성 판단</span>
<span class="kd">function</span> <span class="nf">compatible</span><span class="p">(</span><span class="nx">tileA</span><span class="p">,</span> <span class="nx">tileB</span><span class="p">,</span> <span class="nx">direction</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">tileA</span><span class="p">.</span><span class="nx">edges</span><span class="p">[</span><span class="nx">direction</span><span class="p">]</span> <span class="o">===</span> <span class="nx">tileB</span><span class="p">.</span><span class="nx">edges</span><span class="p">[</span><span class="nx">opposite</span><span class="p">[</span><span class="nx">direction</span><span class="p">]];</span>
<span class="p">}</span>

<span class="c1">// 셀 클래스 (1칸마다 타일 1개)</span>
<span class="kd">class</span> <span class="nc">WFC_TileCell</span> <span class="p">{</span>
    <span class="nf">constructor</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="nx">x</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="nx">y</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">options</span> <span class="o">=</span> <span class="nx">tiles</span><span class="p">.</span><span class="nf">slice</span><span class="p">();</span> <span class="c1">// 가능한 타일들</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">collapsed</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="nf">collapse</span><span class="p">()</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">pick</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">[</span><span class="nb">Math</span><span class="p">.</span><span class="nf">floor</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nf">random</span><span class="p">()</span> <span class="o">*</span> <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">length</span><span class="p">)];</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">options</span> <span class="o">=</span> <span class="p">[</span><span class="nx">pick</span><span class="p">];</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">collapsed</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
        <span class="k">return</span> <span class="nx">pick</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="nf">getTile</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
    <span class="p">}</span>
<span class="p">}</span>


<span class="k">async</span> <span class="kd">function</span> <span class="nf">startWFC</span><span class="p">()</span> <span class="p">{</span>
    <span class="nf">initMap</span><span class="p">();</span>

    <span class="kd">const</span> <span class="nx">tileSize</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span> <span class="c1">// 2x2 타일</span>
    <span class="kd">const</span> <span class="nx">tileCols</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nf">floor</span><span class="p">(</span><span class="nx">cols</span> <span class="o">/</span> <span class="nx">tileSize</span><span class="p">);</span>
    <span class="kd">const</span> <span class="nx">tileRows</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nf">floor</span><span class="p">(</span><span class="nx">rows</span> <span class="o">/</span> <span class="nx">tileSize</span><span class="p">);</span>

    <span class="kd">const</span> <span class="nx">grid</span> <span class="o">=</span> <span class="nb">Array</span><span class="p">.</span><span class="k">from</span><span class="p">({</span> <span class="na">length</span><span class="p">:</span> <span class="nx">tileRows</span> <span class="p">},</span> <span class="p">(</span><span class="nx">_</span><span class="p">,</span> <span class="nx">y</span><span class="p">)</span> <span class="o">=&gt;</span>
        <span class="nb">Array</span><span class="p">.</span><span class="k">from</span><span class="p">({</span> <span class="na">length</span><span class="p">:</span> <span class="nx">tileCols</span> <span class="p">},</span> <span class="p">(</span><span class="nx">_</span><span class="p">,</span> <span class="nx">x</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="k">new</span> <span class="nc">WFC_TileCell</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">))</span>
    <span class="p">);</span>

    <span class="c1">// collapse 루프</span>
    <span class="kd">let</span> <span class="nx">pending</span> <span class="o">=</span> <span class="nx">grid</span><span class="p">.</span><span class="nf">flat</span><span class="p">().</span><span class="nf">filter</span><span class="p">(</span><span class="nx">cell</span> <span class="o">=&gt;</span> <span class="o">!</span><span class="nx">cell</span><span class="p">.</span><span class="nx">collapsed</span><span class="p">);</span>

    <span class="k">while </span><span class="p">(</span><span class="nx">pending</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// 아직 collapse되지 않은 셀 중에서 가능한 옵션이 가장 적은 값 찾기</span>
        <span class="kd">let</span> <span class="nx">minEntropy</span> <span class="o">=</span> <span class="nx">pending</span><span class="p">.</span><span class="nf">reduce</span><span class="p">((</span><span class="nx">min</span><span class="p">,</span> <span class="nx">cell</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nb">Math</span><span class="p">.</span><span class="nf">min</span><span class="p">(</span><span class="nx">min</span><span class="p">,</span> <span class="nx">cell</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">length</span><span class="p">),</span> <span class="kc">Infinity</span><span class="p">);</span>
        <span class="c1">// 가능한 옵션 수가 최소인 셀들만 필터링</span>
        <span class="kd">let</span> <span class="nx">choices</span> <span class="o">=</span> <span class="nx">pending</span><span class="p">.</span><span class="nf">filter</span><span class="p">(</span><span class="nx">c</span> <span class="o">=&gt;</span> <span class="nx">c</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="nx">minEntropy</span><span class="p">);</span>
        <span class="c1">// 그 중 하나를 랜덤 선택</span>
        <span class="kd">let</span> <span class="nx">cell</span> <span class="o">=</span> <span class="nx">choices</span><span class="p">[</span><span class="nb">Math</span><span class="p">.</span><span class="nf">floor</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nf">random</span><span class="p">()</span> <span class="o">*</span> <span class="nx">choices</span><span class="p">.</span><span class="nx">length</span><span class="p">)];</span>

        <span class="kd">const</span> <span class="nx">tile</span> <span class="o">=</span> <span class="nx">cell</span><span class="p">.</span><span class="nf">collapse</span><span class="p">();</span>

        <span class="c1">// 타일을 실제 맵에 그리기</span>
        <span class="k">for </span><span class="p">(</span><span class="kd">let</span> <span class="nx">dy</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">dy</span> <span class="o">&lt;</span> <span class="nx">tileSize</span><span class="p">;</span> <span class="nx">dy</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">for </span><span class="p">(</span><span class="kd">let</span> <span class="nx">dx</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">dx</span> <span class="o">&lt;</span> <span class="nx">tileSize</span><span class="p">;</span> <span class="nx">dx</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">const</span> <span class="nx">mx</span> <span class="o">=</span> <span class="nx">cell</span><span class="p">.</span><span class="nx">x</span> <span class="o">*</span> <span class="nx">tileSize</span> <span class="o">+</span> <span class="nx">dx</span><span class="p">;</span>
            <span class="kd">const</span> <span class="nx">my</span> <span class="o">=</span> <span class="nx">cell</span><span class="p">.</span><span class="nx">y</span> <span class="o">*</span> <span class="nx">tileSize</span> <span class="o">+</span> <span class="nx">dy</span><span class="p">;</span>

            <span class="k">if </span><span class="p">(</span><span class="nx">mx</span> <span class="o">&lt;</span> <span class="nx">cols</span> <span class="o">&amp;&amp;</span> <span class="nx">my</span> <span class="o">&lt;</span> <span class="nx">rows</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">map</span><span class="p">[</span><span class="nx">my</span><span class="p">][</span><span class="nx">mx</span><span class="p">]</span> <span class="o">=</span> <span class="nx">tile</span><span class="p">.</span><span class="nx">data</span><span class="p">[</span><span class="nx">dy</span><span class="p">][</span><span class="nx">dx</span><span class="p">];</span>
              <span class="nf">drawCell</span><span class="p">(</span><span class="nx">mx</span><span class="p">,</span> <span class="nx">my</span><span class="p">,</span> <span class="nx">tile</span><span class="p">.</span><span class="nx">data</span><span class="p">[</span><span class="nx">dy</span><span class="p">][</span><span class="nx">dx</span><span class="p">]</span> <span class="o">===</span> <span class="mi">1</span> <span class="p">?</span> <span class="dl">'</span><span class="s1">black</span><span class="dl">'</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">white</span><span class="dl">'</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">}</span>

        <span class="k">await</span> <span class="nf">sleep</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span>

        <span class="c1">// 주변 셀 옵션 줄이기</span>
        <span class="k">for </span><span class="p">(</span><span class="kd">const</span> <span class="p">[</span><span class="nx">dir</span><span class="p">,</span> <span class="p">[</span><span class="nx">dx</span><span class="p">,</span> <span class="nx">dy</span><span class="p">]]</span> <span class="k">of</span> <span class="nb">Object</span><span class="p">.</span><span class="nf">entries</span><span class="p">({</span>
            <span class="na">up</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">],</span>
            <span class="na">right</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
            <span class="na">down</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
            <span class="na">left</span><span class="p">:</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
            <span class="p">}))</span> <span class="p">{</span>
                <span class="kd">const</span> <span class="nx">nx</span> <span class="o">=</span> <span class="nx">cell</span><span class="p">.</span><span class="nx">x</span> <span class="o">+</span> <span class="nx">dx</span><span class="p">;</span>
                <span class="kd">const</span> <span class="nx">ny</span> <span class="o">=</span> <span class="nx">cell</span><span class="p">.</span><span class="nx">y</span> <span class="o">+</span> <span class="nx">dy</span><span class="p">;</span>

                <span class="k">if </span><span class="p">(</span><span class="nx">nx</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">||</span> <span class="nx">ny</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">||</span> <span class="nx">nx</span> <span class="o">&gt;=</span> <span class="nx">tileCols</span> <span class="o">||</span> <span class="nx">ny</span> <span class="o">&gt;=</span> <span class="nx">tileRows</span><span class="p">)</span> <span class="k">continue</span><span class="p">;</span>

                <span class="kd">const</span> <span class="nx">neighbor</span> <span class="o">=</span> <span class="nx">grid</span><span class="p">[</span><span class="nx">ny</span><span class="p">][</span><span class="nx">nx</span><span class="p">];</span>
                <span class="k">if </span><span class="p">(</span><span class="nx">neighbor</span><span class="p">.</span><span class="nx">collapsed</span><span class="p">)</span> <span class="k">continue</span><span class="p">;</span>

                <span class="c1">// 현재 셀과 호환되는 타일만 남김</span>
                <span class="nx">neighbor</span><span class="p">.</span><span class="nx">options</span> <span class="o">=</span> <span class="nx">neighbor</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nf">filter</span><span class="p">(</span><span class="nx">opt</span> <span class="o">=&gt;</span>
                    <span class="nf">compatible</span><span class="p">(</span><span class="nx">tile</span><span class="p">,</span> <span class="nx">opt</span><span class="p">,</span> <span class="nx">dir</span><span class="p">)</span>
                <span class="p">);</span>
            <span class="p">}</span>

            <span class="nx">pending</span> <span class="o">=</span> <span class="nx">grid</span><span class="p">.</span><span class="nf">flat</span><span class="p">().</span><span class="nf">filter</span><span class="p">(</span><span class="nx">c</span> <span class="o">=&gt;</span> <span class="o">!</span><span class="nx">c</span><span class="p">.</span><span class="nx">collapsed</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">await</span> <span class="nf">generateEntrance</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div></div>

<blockquote>
  <h4 id="완성">완성</h4>
  <hr />
</blockquote>

<p>Delaunay Triangulation + MST<br />
<img src="/assets/images/posts/one-pan/JavaScript/2025-05-28-Dungeon Generator 02/img01.gif" alt="img01" /></p>

<p>WFC<br />
<img src="/assets/images/posts/one-pan/JavaScript/2025-05-28-Dungeon Generator 02/img02.gif" alt="img02" /></p>

<blockquote>
  <h4 id="반성">반성</h4>
  <hr />
</blockquote>

<p>동굴 지형같은 구불구불 무작위보다 구조적인 지형을 구성하는게 무엇보다 더 어려운 느낌이다.<br />
우연하게 태어난 아름다움과 철저히 설계된 아름다움의 차이로 느껴진다.<br />
아 감성적인 하루</p>

<blockquote>
  <h4 id="코드-확인">코드 확인</h4>
  <hr />
</blockquote>

<p><a href="/play/Dungeon%20Generator.html" target="_blank" rel="noopener noreferrer">
  직접 해보기
</a></p>

<p>Delaunay Triangulation + MST<br />
<a href="https://raw.githubusercontent.com/movingwoo/movingwoo-snippets/refs/heads/main/one-pan/JavaScript/2025-05-28-Delaunay.js">Link to GitHub</a></p>

<p>WFC<br />
<a href="https://raw.githubusercontent.com/movingwoo/movingwoo-snippets/refs/heads/main/one-pan/JavaScript/2025-05-28-WFC.js">Link to GitHub</a></p>

          
        </section>

        <footer class="page__meta">
          
          

  <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Updated:</strong> <time datetime="2025-05-28">May 28, 2025</time></p>


        </footer>

        

        
<nav class="post-navigation">
  <div id="postNavigation" class="post-navigation__container"></div>

  <script>
    // 별도 js로 post data 넘겨주기만
    window.postData = {
      currentPost: {
        title: "던전 생성기 02",
        url: "/one-pan/javascript/2025/05/28/Dungeon-Generator-02.html",
        date: "2025-05-28",
        categories: ["one-pan/JavaScript/"]
      },
      allPosts: [
        
        
          
          
          {
            title: "3655번 먼저 가세요",
            url: "/random-solve/python/2025/06/16/3655.html",
            date: "2025-06-16",
            categories: ["random-solve/Python/"]
          },
          
        
          
          
          {
            title: "10722번 Binary Mobile Tree",
            url: "/random-solve/c++/2025/06/16/10722.html",
            date: "2025-06-16",
            categories: ["random-solve/C++/"]
          },
          
        
          
          
          {
            title: "24008번 Catch Them All",
            url: "/random-solve/java/2025/06/13/24008.html",
            date: "2025-06-13",
            categories: ["random-solve/Java/"]
          },
          
        
          
          
          {
            title: "16256번 Painting the Wall",
            url: "/random-solve/c++/2025/06/13/16256.html",
            date: "2025-06-13",
            categories: ["random-solve/C++/"]
          },
          
        
          
          
          {
            title: "제비 뽑기",
            url: "/one-pan/shortcuts/2025/06/11/Drawing-Lots.html",
            date: "2025-06-11",
            categories: ["one-pan/Shortcuts/"]
          },
          
        
          
          
          {
            title: "21237번 Clockwise Fence",
            url: "/random-solve/java/2025/06/10/21237.html",
            date: "2025-06-10",
            categories: ["random-solve/Java/"]
          },
          
        
          
          
          {
            title: "하드웨어 모니터",
            url: "/one-pan/python/2025/06/09/Hardware-Monitor.html",
            date: "2025-06-09",
            categories: ["one-pan/Python/"]
          },
          
        
          
          
          {
            title: "2784번 가로 세로 퍼즐",
            url: "/random-solve/java/2025/06/04/2784.html",
            date: "2025-06-04",
            categories: ["random-solve/Java/"]
          },
          
        
          
          
          {
            title: "4676번 Haiku Review",
            url: "/random-solve/python/2025/06/04/4676.html",
            date: "2025-06-04",
            categories: ["random-solve/Python/"]
          },
          
        
          
          
          {
            title: "WebP 변환기",
            url: "/one-pan/python/2025/06/04/WebP-Converter.html",
            date: "2025-06-04",
            categories: ["one-pan/Python/"]
          },
          
        
          
          
          {
            title: "마법의 소라고둥",
            url: "/one-pan/shortcuts/2025/06/02/Magic-Conch-Shell.html",
            date: "2025-06-02",
            categories: ["one-pan/Shortcuts/"]
          },
          
        
          
          
          {
            title: "1148번 단어 만들기",
            url: "/random-solve/java/2025/06/02/1148.html",
            date: "2025-06-02",
            categories: ["random-solve/Java/"]
          },
          
        
          
          
          {
            title: "11761번 Shuffling Along",
            url: "/random-solve/python/2025/06/02/11761.html",
            date: "2025-06-02",
            categories: ["random-solve/Python/"]
          },
          
        
          
          
          {
            title: "7663번 Dreadful Deadlines",
            url: "/random-solve/c++/2025/05/30/7663.html",
            date: "2025-05-30",
            categories: ["random-solve/C++/"]
          },
          
        
          
          
          {
            title: "6862번 Tin Can Telephone",
            url: "/random-solve/java/2025/05/30/6862.html",
            date: "2025-05-30",
            categories: ["random-solve/Java/"]
          },
          
        
          
          
          {
            title: "15654번 N과 M (5)",
            url: "/random-solve/python/2025/05/30/15654.html",
            date: "2025-05-30",
            categories: ["random-solve/Python/"]
          },
          
        
          
          
          {
            title: "21308번 Ternary Machine",
            url: "/random-solve/python/2025/05/30/21308.html",
            date: "2025-05-30",
            categories: ["random-solve/Python/"]
          },
          
        
          
          
          {
            title: "11982번 Angry Cows (Gold)",
            url: "/random-solve/java/2025/05/28/11982.html",
            date: "2025-05-28",
            categories: ["random-solve/Java/"]
          },
          
        
          
          
          {
            title: "16085번 Гэмт хэрэг",
            url: "/random-solve/c++/2025/05/28/16085.html",
            date: "2025-05-28",
            categories: ["random-solve/C++/"]
          },
          
        
          
          
          {
            title: "던전 생성기 02",
            url: "/one-pan/javascript/2025/05/28/Dungeon-Generator-02.html",
            date: "2025-05-28",
            categories: ["one-pan/JavaScript/"]
          },
          
        
          
          
          {
            title: "7106번 Wonderful Fours",
            url: "/random-solve/python/2025/05/27/7106.html",
            date: "2025-05-27",
            categories: ["random-solve/Python/"]
          },
          
        
          
          
          {
            title: "던전 생성기 01",
            url: "/one-pan/javascript/2025/05/27/Dungeon-Generator-01.html",
            date: "2025-05-27",
            categories: ["one-pan/JavaScript/"]
          },
          
        
          
          
          {
            title: "5101번 Sequences",
            url: "/random-solve/python/2025/05/23/5101.html",
            date: "2025-05-23",
            categories: ["random-solve/Python/"]
          },
          
        
          
          
          {
            title: "27391번 Platform Placing",
            url: "/random-solve/java/2025/05/23/27391.html",
            date: "2025-05-23",
            categories: ["random-solve/Java/"]
          },
          
        
          
          
          {
            title: "25245번 Amusement Arcade",
            url: "/random-solve/c++/2025/05/23/25245.html",
            date: "2025-05-23",
            categories: ["random-solve/C++/"]
          },
          
        
          
          
          {
            title: "미로 생성기 03",
            url: "/one-pan/javascript/2025/05/23/Maze-Generator-03.html",
            date: "2025-05-23",
            categories: ["one-pan/JavaScript/"]
          },
          
        
          
          
          {
            title: "26489번 Gum Gum for Jay Jay",
            url: "/random-solve/python/2025/05/22/26489.html",
            date: "2025-05-22",
            categories: ["random-solve/Python/"]
          },
          
        
          
          
          {
            title: "미로 생성기 02",
            url: "/one-pan/javascript/2025/05/21/Maze-Generator-02.html",
            date: "2025-05-21",
            categories: ["one-pan/JavaScript/"]
          },
          
        
          
          
          {
            title: "26226번 Autocomplete",
            url: "/random-solve/c++/2025/05/21/26226.html",
            date: "2025-05-21",
            categories: ["random-solve/C++/"]
          },
          
        
          
          
          {
            title: "미로 생성기 01",
            url: "/one-pan/javascript/2025/05/20/Maze-Generator-01.html",
            date: "2025-05-20",
            categories: ["one-pan/JavaScript/"]
          },
          
        
          
          
          {
            title: "15936번 Hypercube",
            url: "/random-solve/java/2025/05/20/15936.html",
            date: "2025-05-20",
            categories: ["random-solve/Java/"]
          },
          
        
          
          
          {
            title: "29348번 Скользкий путь",
            url: "/random-solve/c++/2025/05/16/29348.html",
            date: "2025-05-16",
            categories: ["random-solve/C++/"]
          },
          
        
          
          
          {
            title: "18382번 2048",
            url: "/random-solve/python/2025/05/15/18382.html",
            date: "2025-05-15",
            categories: ["random-solve/Python/"]
          },
          
        
          
          
          {
            title: "랜덤 출력기",
            url: "/one-pan/javascript/2025/05/14/Random-Printer.html",
            date: "2025-05-14",
            categories: ["one-pan/JavaScript/"]
          },
          
        
          
          
          {
            title: "파이썬으로 CLI TODO 리스트 만들어보기",
            url: "/ai-playground/gpt/2025/05/14/GPT.html",
            date: "2025-05-14",
            categories: ["AI-playground/GPT/"]
          },
          
        
          
          
          {
            title: "플래피 버드",
            url: "/one-pan/javascript/2025/05/13/Flappy-Bird.html",
            date: "2025-05-13",
            categories: ["one-pan/JavaScript/"]
          },
          
        
          
          
          {
            title: "클리커",
            url: "/one-pan/python/2025/05/13/Clicker.html",
            date: "2025-05-13",
            categories: ["one-pan/Python/"]
          },
          
        
          
          
          {
            title: "파일 복사기",
            url: "/one-pan/shellscript/2025/05/12/File-Copier.html",
            date: "2025-05-12",
            categories: ["one-pan/ShellScript/"]
          },
          
        
          
          
          {
            title: "숫자야구",
            url: "/one-pan/java/2025/05/11/Bulls-and-Cows.html",
            date: "2025-05-11",
            categories: ["one-pan/Java/"]
          },
          
        
          
          
          {
            title: "즐거운 연휴",
            url: "/ai-playground/gpt/2025/05/01/GPT.html",
            date: "2025-05-01",
            categories: ["AI-playground/GPT/"]
          },
          
        
          
          
          {
            title: "즐거운 연휴, 어떻게 보내면 좋을까?",
            url: "/ai-playground/claude/2025/05/01/Claude.html",
            date: "2025-05-01",
            categories: ["AI-playground/Claude/"]
          },
          
        
          
          
          {
            title: "프로그래머를 위한 생산성 툴 TOP 5 🧰",
            url: "/ai-playground/gpt/2025/04/30/GPT.html",
            date: "2025-04-30",
            categories: ["AI-playground/GPT/"]
          },
          
        
          
          
          {
            title: "AI 시대의 개발자, 어떻게 준비해야 할까?",
            url: "/ai-playground/claude/2025/04/30/Claude.html",
            date: "2025-04-30",
            categories: ["AI-playground/Claude/"]
          },
          
        
          
          
          {
            title: "지뢰찾기",
            url: "/one-pan/javascript/2025/04/29/Minesweeper.html",
            date: "2025-04-29",
            categories: ["one-pan/JavaScript/"]
          },
          
        
          
          
          {
            title: "서버 관리 콘솔",
            url: "/one-pan/shellscript/2025/04/28/Server-Manage-Console.html",
            date: "2025-04-28",
            categories: ["one-pan/ShellScript/"]
          }
          
        
      ]
    };
  </script>
  <script src="/assets/js/post_pagination.js" defer></script>
</nav>

      </div>

      
      
      
        <script src="https://giscus.app/client.js"
        data-repo="movingwoo/movingwoo.github.io"
        data-repo-id="R_kgDOORY1lQ"
        data-category="Announcements"
        data-category-id="DIC_kwDOORY1lc4CpoFq"
        data-mapping="pathname"
        data-strict="0"
        data-reactions-enabled="0"
        data-emit-metadata="0"
        data-input-position="bottom"
        data-theme="https://movingwoo.com/assets/css/giscus-theme.css"
        data-lang="ko"
        crossorigin="anonymous"
        async>
</script>
      
    </article>

    
    
  </div>
</div>

<style>
.home-layout {
  display: flex;
  max-width: 1500px;
  margin: 0 auto;
  padding: 0;
}

.home-sidebar {
  flex-shrink: 0;
  width: 300px;
  margin-right: 1rem;
  position: relative;
  display: block !important;
}

.home-content {
  flex-grow: 1;
  min-width: 0;
  width: 100%;
}

@media (max-width: 64em) {
  .home-layout {
    flex-direction: column;
  }
  
  .home-sidebar {
    width: 100%;
    margin-right: 0;
    margin-bottom: 1rem;
  }
  
  .home-content {
    padding: 0;
  }
}
</style>

    </div>

    
    
    <div class="page__footer">
  <div class="page__footer-copyright">
    Visit: <a href="https://github.com/movingwoo/movingwoo.github.io">https://github.com/movingwoo/movingwoo.github.io</a>
    <br>
    <span class="theme-credit">Theme customized from Minimal Mistakes by Michael Rose (MIT License).</span>
  </div>
</div>

    <div class="scroll-button">
  <div class="scroll-button__container">
    <button class="scroll-button__area scroll-button__area--top" onclick="window.scrollTo({top: 0, behavior: 'smooth'})" title="위로">
      <i class="fas fa-arrow-up"></i>
    </button>
    <button class="scroll-button__area scroll-button__area--bottom" onclick="window.scrollTo({top: document.body.scrollHeight, behavior: 'smooth'})" title="아래로">
      <i class="fas fa-arrow-down"></i>
    </button>
  </div>
</div>

<style>
.scroll-button {
  position: fixed;
  right: 20px;
  bottom: 20px;
  z-index: 1000;
}

.scroll-button__container {
  width: 60px;
  height: 60px;
  border-radius: 50%;
  border: 2px solid rgba(220, 20, 60, 0.6);
  background-color: transparent;
  position: relative;
  overflow: hidden;
}

.scroll-button__area {
  position: absolute;
  width: 100%;
  height: 50%;
  left: 0;
  background: transparent;
  border: none;
  color: rgba(220, 20, 60, 0.6);
  cursor: pointer;
  padding: 0;
  transition: all 0.3s ease;
  outline: none;
  display: flex;
  align-items: center;
  justify-content: center;
}

.scroll-button__area--top {
  top: 0;
}

.scroll-button__area--bottom {
  bottom: 0;
}

.scroll-button__area:focus {
  outline: none;
}

.scroll-button__area:hover {
  color: rgba(220, 20, 60, 1);
}

.scroll-button__area:hover i {
  transform: scale(1.2);
}

.scroll-button__area i {
  font-size: 1rem;
  transition: transform 0.3s ease;
}

@media (max-width: 768px) {
  .scroll-button {
    right: 10px;
    bottom: 10px;
  }
  
  .scroll-button__container {
    width: 50px;
    height: 50px;
  }
}
</style> 
    
  <script src="/assets/js/main.min.js"></script>









<script>
document.addEventListener('contextmenu', function(e) {
    e.preventDefault();
});
document.addEventListener('selectstart', function(e) {
    e.preventDefault();
});
document.addEventListener('copy', function(e) {
    e.preventDefault();
});
</script>


  </body>
</html>
